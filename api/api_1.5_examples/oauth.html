<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>OAuth</title><meta name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../js/main.js"></script></head><body class="api api_api_1" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../">Flexera CMP Docs</a> &#x2F; <a href="../">Flexera CMP APIs</a> &#x2F; <a href="./">Examples</a></p><div class="page-header"><h1>OAuth</h1></div><div class="main-content"><h2 id="overview">Overview</h2>

<p>OAuth-compatible authentication and authorization supports a password-less Dashboard user that can log into the API and make authenticated requests. This feature is currently in public beta. Please contact support with any issues.</p>

<p>With OAuth, you can make authenticated API 1.0 and 1.5 requests without needing a password and can be disabled at any time without changing your password.</p>

<h2 id="obtaining-an-oauth-grant">Obtaining an OAuth Grant</h2>

<p>Follow the steps below to enable OAuth:</p>

<ol>
<li>Make sure you&#39;re in the account you want to enable with OAuth.</li>
<li>Go to <strong>Settings</strong> &gt; <strong>Account Settings</strong> &gt; <strong>API Credentials</strong>.</li>
<li>In <strong>Status</strong> , click <strong>enable</strong>.</li>
<li>Obtain the API refresh token in order to make API requests without logging in. It&#39;s important that this token is protected.</li>
<li>Lastly, take note of the <em>Token Endpoint (API 1.5)</em> value as this is required when making API request.</li>
</ol>

<p><strong>Note</strong> : The hostname of the <em>Token Endpoint (API 1.5)</em> may vary between RightScale accounts depending on the geographical region in which each account is hosted. </p>

<p>Example:
<br><strong>Token Endpoint (API 1.5):</strong>   https://us-3.rightscale.com/api/oauth2 </p>

<p>Make sure to use the correct endpoint for your account when making API request, both OAuth and otherwise.</p>

<h2 id="curl">Curl</h2>

<h3 id="curl-obtaining-an-api-access-token">Obtaining an API Access Token</h3>

<p><strong>Note</strong> : The following examples use API 1.5.</p>

<p><strong>Example Call</strong></p>
<pre class="syntax-highlight plaintext"><code>    #Obtain these values from the 'Settings &gt; Account &gt; API Credentials' page
    #Example: API_ENDPOINT="us-3"

    my_token_endpoint="https://$API_ENDPOINT.rightscale.com/api/oauth2"
    my_refresh_token="0facab1a657fff56f3214ecf7eeeafbfe6084052"

    curl --include \
      -H "X-API-Version:1.5" \
      --request POST "$my_token_endpoint" \
      -d "grant_type=refresh_token" \
      -d "refresh_token=$my_refresh_token"
</code></pre>

<p><strong>Example Response</strong></p>
<pre class="syntax-highlight plaintext"><code>    HTTP/1.1 200 OK

    Content-Type: application/json; charset=utf-8
    Cache-Control: private, max-age=0, must-revalidate
    Pragma: no-cache

    {
      "access_token":"eNotkMuOg...8vf4A2GhbCA==",
      "expires_in":7200,
      "token_type":"bearer"
    }
</code></pre>

<ul>
<li>Make note of the access_token to use when requesting a resource. See below for an example of how this is done.</li>
</ul>

<h3 id="curl-making-an-oauth-authorized-api-request">Making an OAuth-Authorized API Request</h3>

<p>Once you obtain your access token, incorporate it into your API requests.</p>

<p><strong>Example Call</strong></p>
<pre class="syntax-highlight plaintext"><code>    access_token="eNotkMuOg...8vf4A2GhbCA=="

    curl --include \
      -H "X-API-Version:1.5" \
      -H "Authorization: Bearer $access_token" \
      --request GET "https://$API_ENDPOINT.rightscale.com/api/deployments"
</code></pre>

<p><strong>Example Response</strong></p>
<pre class="syntax-highlight plaintext"><code>    HTTP/1.1 200 OK
    Content-Type: application/json; charset=utf-8

    {...}
</code></pre>

<h2 id="powershell">PowerShell</h2>

<h3 id="powershell-obtaining-an-api-access-token">Obtaining an API Access Token</h3>

<p><strong>Note</strong> : The following examples use API 1.5.</p>

<p><strong>Example Call</strong></p>
<pre class="syntax-highlight plaintext"><code>&lt;#
Example: API_ENDPOINT="us-3"
#&gt;
    $oauthRefreshToken = "0facab1a657fff56f3214ecf7eeeafbfe6084052"

    $oauthUrl = "https://$API_ENDPOINT.rightscale.com/api/oauth2"
    $postString = "grant_type=refresh_token;refresh_token=$oauthRefreshToken;"
    $postBytes = [System.Text.Encoding]::UTF8.GetBytes($postString)

    $httpRequest = [System.Net.WebRequest]::Create($oauthUrl)
    $httpRequest.Method = "POST"
    $httpRequest.headers.Add("X_API_VERSION", "1.5")
    $httpRequest.ContentLength = $postbytes.Length
    $requestStream = $httpRequest.GetRequestStream()
    $requestStream.Write($postBytes, 0, $postBytes.length)

    [System.Net.WebResponse] $httpResponse = $httpRequest.GetResponse()
    $responseStream = $httpResponse.GetResponseStream()
    [System.IO.StreamReader] $streamReader = New-Object System.IO.Streamreader -ArgumentList $responseStream
    $httpResult = $streamReader.ReadToEnd()
    write-host $httpResult
</code></pre>

<p><strong>Example Response</strong></p>
<pre class="syntax-highlight plaintext"><code>    write-host $httpResult

    {
      "access_token":"eNotkMuOg...8vf4A2GhbCA==",
      "expires_in":7200,
      "token_type":"bearer"
    }
</code></pre>

<ul>
<li>Make note of the access_token to use when requesting a resource. See below for an example of how this is done.</li>
</ul>

<h2 id="making-an-oauth-authorized-api-request">Making an OAuth-Authorized API Request</h2>

<p>Once you obtain your access token, incorporate it into your API requests.</p>

<p><strong>Example Call</strong></p>
<pre class="syntax-highlight plaintext"><code>    $accessToken="eNotkMuOg...8vf4A2GhbCA=="

    $httpRequest = [System.Net.WebRequest]::Create("https://$API_ENDPOINT.rightscale.com/api/deployments")
    $httpRequest.Method = "GET"
    $httpRequest.Headers.Add("X_API_VERSION","1.5")
    $httpRequest.Headers.Add("Authorization","Bearer $accessToken")
    [system.Net.WebResponse] $httpResponse = $httpRequest.GetResponse()
    $responseStream = $httpResponse.GetResponseStream()
    [System.IO.StreamReader] $streamReader = New-Object System.IO.Streamreader-ArgumentList $responseStream
    $httpResult = $streamReader.ReadToEnd()
    write-host $httpResult
</code></pre>

<p><strong>Example Response</strong></p>
<pre class="syntax-highlight plaintext"><code>    HTTP/1.1 200 OK

    Content-Type: application/json; charset=utf-8



    {...}
</code></pre>

<h2 id="additional-notes">Additional Notes</h2>

<ul>
<li>Anyone who possesses a valid token can log into the enabled account via the API and perform API requests on your behalf, with all of your permissions. Please protect this token appropriately.</li>
<li>The OAuth API feature allows users with Single Sign-On enabled to access the API without a username/password combination.</li>
<li><q>Enable</q> enables OAuth for your account and generates a valid token. This token does not expire until it is <q>disabled</q> which will make the previous token invalid. The next time it is <q>enabled,</q> a new token will be generated.</li>
</ul>

<h2 id="see-also">See also</h2>

<ul>
<li><a href="/cm/dashboard/settings/account/enable_oauth.html">Enable OAuth</a></li>
</ul>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>