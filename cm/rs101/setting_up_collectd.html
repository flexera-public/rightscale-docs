<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Setting up collectd</title><meta content="Background and high-level steps for setting up collectd in the RightScale Cloud Management Platform." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../js/main.js"></script></head><body class="cm cm_rs101 cm_rs101_setting_up_collectd" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/cm"><h4 class="list-group-heading"><img src="../../img/product-cloud-management.svg" /><span>Cloud Management</span></h4></a><a class="list-group-item" href="../about.html">About</a><a class="list-group-item" href="/cm/rs101/">Terminology and Concepts</a><a class="list-group-item" href="/cm/management_guide/">Lifecycle Management</a><a class="list-group-item" href="/cm/dashboard/">Dashboard User's Guide</a><a class="list-group-item" href="/cm/administrators_guide/">Administrator's Guide</a><a class="list-group-item" href="/cm/designers_guide/">Designer's Guide</a><a class="list-group-item" href="/cm/dashboard/design/server_templates/">ServerTemplates</a><a class="list-group-item" href="/cm/servertemplate_dev_guide/">ServerTemplate Developer's Guide</a><a class="list-group-item" href="/cm/pas/">Publishing and Sharing</a><a class="list-group-item" href="/cm/windows_guide/">Windows Guide</a><a class="list-group-item" href="/cm/ref/">Reference Information</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../">Flexera CMP Docs</a> &#x2F; <a href="../">Cloud Management</a> &#x2F; <a href="./">Cloud Management - Terminology and Concepts</a></p><div class="page-header"><h1>Setting up collectd</h1></div><div class="main-content"><p>If you are using a ServerTemplate that does not have monitoring enabled, you must add the appropriate RightScript or Chef Recipe to the boot sequence of your ServerTemplate to enable monitoring, otherwise you will not be able to see any graphs (under a server&#39;s Monitoring tab) or set any alert specifications. For this reason, it is recommended that you start your ServerTemplate development by cloning the <q>Base</q> ServerTemplate. The lineage of your ServerTemplate determines which scripts you need to work with in order to enable monitoring.</p>

<ul>
<li>v13.5.x LTS Chef-based ServerTemplates utilize the <strong>rightscale::setup_monitoring</strong> script.</li>
<li>v13.5.x LTS RightScript-based ServerTemplates utilize the <strong>SYS_Monitoring</strong> script.</li>
<li>v14.x Infinity Chef-based ServerTemplates utilize the <strong>rs-base::collectd</strong> script.</li>
<li>v14.x Infinity RightScript-based ServerTemplates utilize the <strong>BASE_collectd</strong> script.</li>
</ul>

<p>A server cannot be monitored by RightScale unless the correct RightScript or recipe has been added to the boot sequence. Since new features are constantly being added to the Monitoring utility, it is highly recommended that you install collectd using our RightScripts or recipes.</p>

<h2 id="installing-collectd-with-rightscripts">Installing collectd with RightScripts</h2>

<p>Assuming you have already imported one of RightScale&#39;s RightScript-based (RSB) ServerTemplates from the MultiCloud Marketplace, you can add the RightScript required to enable monitoring to another ServerTemplate. Be sure to add it to the Boot Sequence. The following example illustrates adding the <strong>BASE_collectd</strong> RightScript to a v14.x Infinity SeverTemplate. If you are working with a v13.5.x LTS ServerTemplate you would use the <strong>SYS_Monitoring</strong> RightScript.</p>

<p><img src="/img/cm-add-rightscript-to-boot-sequence.png" alt="cm-add-rightscript-to-boot-sequence.png" width="725" height="232" /></p>

<h2 id="installing-collectd-with-chef-recipes">Installing collectd with Chef Recipes</h2>

<p>Assuming you have already imported one of RightScale&#39;s Chef-based ServerTemplates from the MultiCloud Marketplace, you can add the Chef Recipe required to enable monitoring to another ServerTemplate. Be sure to add it to the Boot Sequence. The following example illustrates adding the <strong>rs-base::collectd</strong> Chef Recipe to a v14.x Infinity SeverTemplate. If you are working with a v13.5.x LTS ServerTemplate you would use the <strong>rightscale::setup_monitoring</strong> Chef Recipe.</p>

<p><img src="/img/cm-add-recipt-to-boot-sequence.png" alt="cm-add-recipt-to-boot-sequence.png" width="725" height="314" /></p>

<h2 id="installing-collectd-yourself">Installing collectd Yourself</h2>

<div class="alert alert-warning" role="alert"><strong>Warning!</strong><p>It is highly recommend that you <em>only</em> install Collectd from Rightscale&#39;s official scripts and recipes mentioned above. If you need a specific collectd version or must install it yourself, it is best to contact our support team for further clarification and insight before moving on.</p>
</div>

<p>That being said, if you must install collectd yourself and use a non-Rightscale sanctioned version then you will want to follow the advice below.</p>

<p>If RightScale&#39;s RightScripts cannot be used, collectd can be installed from public repositories or from a specified source. An appropriate config file should also be copied from the RightScripts. If for some reason you need to install collectd yourself, use the following steps:</p>

<ul>
<li>Install collectd version 4.3.1 or later.</li>
<li>Set the hostname in the config file to the TSS ID number (formatted like this: 01-3IPDVL6CR0FSK) found on the info tab of your server, or the Env variable RS_Instance_UUID)</li>
<li>Configure the network plugin to send the monitoring data to the monitoring server specified in the launch data as RS_TSS=&lt;<em>hostname</em>&gt;</li>
<li>Use a 20-second interval</li>
<li>Be sure to add the following tag to your server: <q>rs_monitoring:state=active</q></li>
</ul>

<h2 id="see-also">See Also</h2>

<ul>
<li><a href="/cm/rs101/collectd_plugin_apache_log_monitor.html">Collectd Plugin: Apache Log Monitor</a></li>
</ul>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>