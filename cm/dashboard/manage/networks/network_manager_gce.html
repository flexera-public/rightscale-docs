<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Using Network Manager with GCE</title><meta content="Use the Network Manager in the RightScale Cloud Management Dashboard with Google Compute Engine (GCE)." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../../../js/main.js"></script></head><body class="cm cm_dashboard cm_dashboard_manage cm_dashboard_manage_networks cm_dashboard_manage_networks_network_manager_gce" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/cm"><h4 class="list-group-heading"><img src="../../../../img/product-cloud-management.svg" /><span>Cloud Management</span></h4></a><a class="list-group-item" href="../../../about.html">About</a><a class="list-group-item" href="/cm/rs101/">Terminology and Concepts</a><a class="list-group-item" href="/cm/management_guide/">Lifecycle Management</a><a class="list-group-item" href="/cm/dashboard/">Dashboard User's Guide</a><a class="list-group-item" href="/cm/administrators_guide/">Administrator's Guide</a><a class="list-group-item" href="/cm/designers_guide/">Designer's Guide</a><a class="list-group-item" href="/cm/dashboard/design/server_templates/">ServerTemplates</a><a class="list-group-item" href="/cm/servertemplate_dev_guide/">ServerTemplate Developer's Guide</a><a class="list-group-item" href="/cm/pas/">Publishing and Sharing</a><a class="list-group-item" href="/cm/windows_guide/">Windows Guide</a><a class="list-group-item" href="/cm/ref/">Reference Information</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../../../">Flexera CMP Docs</a> &#x2F; <a href="../../../">Cloud Management</a> &#x2F; <a href="../../">Dashboard User's Guide</a> &#x2F; <a href="../">Manage</a> &#x2F; <a href="./">Networks - Actions and Procedures</a></p><div class="page-header"><h1>Using Network Manager with GCE</h1></div><div class="main-content"><h2 id="overview">Overview</h2>

<p>Google Compute Engine (GCE) provides a networking system in which you can create networks and manage how your instances connect to and interact with the outside world. You can build out real-world GCE workloads solely using RightScale. In addition to working within the CM Dashboard, you can use the RightScale API to automate network provisioning and you can leverage Self-Service CAT files to include GCE networks in CloudApps. This page describes the mapping of GCE Network concepts to RightScale network abstractions and provides the steps for creating Google network components using the RightScale CM Dashboard. You may want to visit the <a href="https://cloud.google.com/compute/docs/networks-and-firewalls">Google (GCE) Networks and Firewalls overview</a> for additional information.</p>

<h2 id="mapping-gce-network-concepts-into-rs-network-abstractions">Mapping GCE Network Concepts into RS Network Abstractions</h2>

<p>The following Table describes how the various GCE Network concepts have been mapped to network abstractions in RightScale.</p>

<table><thead>
<tr>
<th>GCE Network Component</th>
<th>RightScale Abstraction</th>
</tr>
</thead><tbody>
<tr>
<td>Network</td>
<td>Network (inc. CIDR range), Subnet, Network Gateway (internet or vpn)</td>
</tr>
<tr>
<td>External IP Address</td>
<td>Public IP Address</td>
</tr>
<tr>
<td>Internal IP Address</td>
<td>Private IP Address</td>
</tr>
<tr>
<td>Firewall</td>
<td>Security Group</td>
</tr>
<tr>
<td>Route Collection</td>
<td>Route Table</td>
</tr>
<tr>
<td>Route</td>
<td>Route</td>
</tr>
</tbody></table>

<h3 id="mapping-gce-network-concepts-into-rs-network-abstractions-gce-networks">GCE Networks</h3>

<p>For more detailed information on how networks are handled in GCE, see the <a href="https://cloud.google.com/compute/docs/networking#networks">Networks</a> section of the GCE documentation.</p>

<h4 id="subnetworks">Subnetworks</h4>

<div class="alert alert-warning" role="alert"><strong>Note</strong><p>GCE Subnetworks are displayed and can be used when launching instances, but currently cannot be created or managed through RightScale. Legacy networks can be fully managed.</p>
</div>

<p>Subnet mode is the new form of networks in which your network is subdivided into regional subnetworks. Each subnetwork controls the IP address range used for VMs that are allocated to that subnetwork. The IP ranges of the different subnetworks in a network might be non-contiguous. There are two options for using subnetworks:</p>

<ul>
<li><p>Auto Subnet Network automatically assigns a subnetwork IP prefix range to each region in your network. The instances created in a zone in a specific region in your network get assigned an IP allocated from the regional subnetwork range. The default network for a new project is an auto subnet network.</p></li>
<li><p>Custom Subnet Network allows you to manually define subnetwork prefixes for each region in your network. There can be zero, one, or several subnetwork prefixes created per region for a network. In order to create an instance in a zone, you must have previously created at least one subnetwork in that region. At instance creation time, you will need to specify the subnetwork in the region that the instance IP should be allocated from.</p></li>
</ul>

<h4 id="legacy-networks">Legacy Networks</h4>

<p>Legacy (non-subnetwork) mode is the original approach for networks, where IP address allocation occurs at the global network level. This means the network address space spans across all regions. It is still possible to create a legacy network, but subnetworks are the preferred approach and default behavior going forward.</p>

<p>You can use RightScale to customize the default network by adding or removing rules, or you can create new networks in that GCE project. GCE Instances not explicitly attached to a network on launch are attached to the default network. </p>

<h3 id="mapping-gce-network-concepts-into-rs-network-abstractions-gce-firewalls">GCE Firewalls</h3>

<p>GCE firewalls provide similar functionality to AWS security groups. A firewall belongs to a network, it has rules that define what incoming connections are accepted by which instances. Each firewall rule specifies a permitted incoming connection request, defined by source, destination, ports, and protocol. Rules may additionally contain target tags that specify which instances on the network can accept requests from the specified sources (if no target tag is specified then the rules applies to all instances attached to the network). For more detailed information on how firewalls are handled in GCE, see the <a href="https://cloud.google.com/compute/docs/networking#firewalls">Firewalls</a> section of the GCE documentation.</p>

<h3 id="mapping-gce-network-concepts-into-rs-network-abstractions-gce-routes">GCE Routes</h3>

<p>By default, every GCE network has two default routes: a route that directs traffic to the Internet and a route that directs traffic to other instances within the GCE network. A single GCE route comprises a route name, a destination range, a next-hop specification, any instance tags, and a priority value. A route specifies the destination IP range in CIDR format, the next hop as an instance, an IP, a gateway or a VPN tunnel, and a priority as a numeric value. Optionally, instance tags are used to specify which instances on the network the route applies to (if no tag is specified then the rules applies to all instances attached to the network). For more detailed information on how routes are handled in GCE, see the <a href="https://cloud.google.com/compute/docs/networking#routing">Routes Collection</a> section of the GCE documentation.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>You must have the &#39;security_manager&#39; user role privilege in order to work with GCE Networks in the RightScale Network Manager.</li>
</ul>

<h2 id="create-a-new-gce-network">Create a New GCE Network</h2>

<p>The first step in setting up a GCE network using RightScale is to create a new network using the Network Manager.</p>

<ol>
<li>In the RightScale Dashboard, navigate to <strong>Manage</strong> &gt; <strong>Networks</strong>.</li>
<li>Click <strong>New Network</strong>. The New Network dialog displays.<br>
<img src="/img/cm-network-manager-gce-new.png" alt="cm-network-manager-gce-new.png" width="565" height="436" /><br></li>
<li>Select the Google cloud and enter a name for the new network along with a short description. For this example, we will use &#39;my-google-network&#39; as the network name. Click <strong>Next</strong>.
<img src="/img/cm-network-manager-gce-new2.png" alt="cm-network-manager-gce-new2.png" width="566" height="487" /></li>
<li>Enter a value for the <strong>CIDR Block</strong> (10.0.0.0/16 in this example). The range you specify can contain 16 to 65,536 IP addresses. Note that you cannot change the size of the network after you create it.</li>
<li>Click <strong>Create</strong>. You should see a &#39;growler&#39; message near the top of the Dashboard indicating that the network was created successfully.</li>
</ol>

<h2 id="create-a-new-firewall-rule--security-group-">Create a New Firewall Rule (Security Group)</h2>

<p>By default, a Google network includes one Security Group (or Firewall in Google nomenclature). In this step we will create a new firewall rule.</p>

<ol>
<li>In the RightScale Dashboard, navigate to <strong>Manage</strong> &gt; <strong>Networks</strong>.</li>
<li>Enter a meaningful <strong>Name</strong> for the new Security Group.</li>
<li>Enter a <strong>Description</strong> for the new Security Group.</li>
<li>Select the <strong>Common Ports</strong> you want to open for this Security Group.</li>
<li>Click <strong>Create</strong>.</li>
</ol>

<h2 id="create-a-new-route-in-the-default-route-table">Create a New Route in the Default Route Table</h2>

<p>By default, a Google network includes one route that directs traffic to the Internet and another route that directs traffic to other instances within the network. In this step, we will modify the default route table to include a new route.</p>

<ol>
<li>In the RightScale Dashboard, navigate to <strong>Manage</strong> &gt; <strong>Networks</strong>.</li>
<li>Navigate to the <strong>Route Tables</strong> tab. Click the default route table, then click <strong>New Route</strong>. The New Route dialog displays.
<img src="/img/cm-network-manager-gce-new-route.png" alt="cm-network-manager-gce-new-route.png" width="564" height="436" /></li>
<li>Enter a <strong>Destination CIDR</strong> address block for the destination resource.</li>
<li>Using the <strong>Next Hop</strong> drop-down, choose the appropriate target type for the next hop for this route (Instance, URL, IP Address). Choosing <strong>Instance</strong> displays a drop-down from which you can select an existing instance, while choosing <strong>URL</strong> or <strong>IP Address</strong> displays a field in which you can enter a valid URL or IP address value. In the above example, we&#39;ve used an instance.</li>
<li>Enter a meaningful <strong>Description</strong> of the route.</li>
<li>Enter a numeric <strong>Priority</strong> value for the route. Lower values have higher priority.</li>
<li>Enter one or more <strong>Instance Tags</strong> to which the route will apply. If you elect to leave this field empty, the route will apply to all instances.</li>
<li>Click <strong>Create</strong>.</li>
</ol>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>