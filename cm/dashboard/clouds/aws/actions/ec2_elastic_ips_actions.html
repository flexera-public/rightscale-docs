<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>EC2 Elastic IPs - Actions</title><meta content="Common procedures for working with EC2 Elastic IPs in the RightScale Cloud Management Dashboard." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../../../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../../../../js/main.js"></script></head><body class="cm cm_dashboard cm_dashboard_clouds cm_dashboard_clouds_aws cm_dashboard_clouds_aws_actions cm_dashboard_clouds_aws_actions_ec2_elastic_ips_actions" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../../../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../../../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/cm"><h4 class="list-group-heading"><img src="../../../../../img/product-cloud-management.svg" /><span>Cloud Management</span></h4></a><a class="list-group-item" href="../../../../about.html">About</a><a class="list-group-item" href="/cm/rs101/">Terminology and Concepts</a><a class="list-group-item" href="/cm/management_guide/">Lifecycle Management</a><a class="list-group-item" href="/cm/dashboard/">Dashboard User's Guide</a><a class="list-group-item" href="/cm/administrators_guide/">Administrator's Guide</a><a class="list-group-item" href="/cm/designers_guide/">Designer's Guide</a><a class="list-group-item" href="/cm/dashboard/design/server_templates/">ServerTemplates</a><a class="list-group-item" href="/cm/servertemplate_dev_guide/">ServerTemplate Developer's Guide</a><a class="list-group-item" href="/cm/pas/">Publishing and Sharing</a><a class="list-group-item" href="/cm/windows_guide/">Windows Guide</a><a class="list-group-item" href="/cm/ref/">Reference Information</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../../../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../../../../">Flexera CMP Docs</a> &#x2F; <a href="../../../../">Cloud Management</a> &#x2F; <a href="../../../">Dashboard User's Guide</a> &#x2F; <a href="../../">clouds</a> &#x2F; <a href="../">Amazon Web Services (AWS)</a> &#x2F; <a href="./">AWS Actions</a></p><div class="page-header"><h1>EC2 Elastic IPs - Actions</h1></div><div class="main-content"><h2 id="assign-an-elastic-ip-at-launch">Assign an Elastic IP at Launch</h2>

<p>The most common way to use an Elastic IP (EIP) is to assign it to a server when it&#39;s launched for the first time. You can also assign an Elastic IP to a current running instance. If you select an EIP, but uncheck the <q>Associate IP at launch</q> option, the instance will be randomly assigned a Public IP address at launch time; the Elastic IP will not be assigned to the instance.</p>

<h3 id="assign-an-elastic-ip-at-launch-add-a-server-to-a-deployment">Add a Server to a Deployment</h3>

<p><img src="/img/cm-add-server-add-EIP.png" alt="cm-add-server-add-EIP.png" width="644" height="536" /></p>

<h3 id="assign-an-elastic-ip-at-launch-modify-inactive-server">Modify Inactive Server</h3>

<p>You can also change the configuration of a server to associate an EIP at launch time. You can only apply this setting to an inactive server that has not been launched. So, if there is a <q>Current</q> server that&#39;s already running, you&#39;ll need to modify the <q>Next</q> server.</p>

<p><img src="/img/cm-assign-EIP-server.png" alt="cm-assign-EIP-server.png" width="476" height="114" /></p>

<div class="alert alert-warning" role="alert"><strong>Warning!</strong><p>You can steal an Elastic IP from a running instance! Be sure to check and make sure that a running instance is not using the EIP that you want to assign to a new server.</p>
</div>

<h2 id="transfer-an-elastic-ip-to-a-running-instance">Transfer an Elastic IP to a Running Instance</h2>

<p>Once you have a running production deployment, you might run into a scenario where you need to replace one of your load balancers because it&#39;s corrupted, outdated, or failed. There are several places inside the Dashboard where you can easily transfer an Elastic IP to another running instance.</p>

<h3 id="transfer-an-elastic-ip-to-a-running-instance-things-to-consider">Things to Consider</h3>

<ul>
<li>It will take several minutes for an EIP to transfer to another instance.</li>
<li>When a new instance is assigned an EIP at launch, it will wait for the EIP to settle before trying to handle any traffic. But, if you transfer an EIP to an instance that is already running, it will not wait for the EIP to settle before handling traffic.</li>
<li>HAproxy will maintain any connections to the old server in order to prevent users from dropping their connection. <q>Sticky sessions</q> will persist until there are no more connections to the old server or until you manually shut down or terminate the instance.</li>
</ul>

<h3 id="transfer-an-elastic-ip-to-a-running-instance-instructions">Instructions</h3>

<p>Verify that the instance that you are transferring the EIP to is stable and ready to receive incoming traffic.</p>

<h4 id="change-eips-at-the-deployment-level">Change EIPs at the Deployment Level</h4>

<p>If your instance is running, you can associate an EIP at the Deployment level. Go to your Deployment&#39;s home page (Manage &gt; Deployments &gt; <em>DeploymentName</em>). Click on the Servers tab. If the <q>Public IP</q> column is not displayed, you will need to make it visible by using the <q>Show/Hide Columns</q> option. To change an instance&#39;s EIP, click the Edit icon and select an EIP from the list and click the OK icon.</p>

<p><img src="/img/cm-change-EIP-running-server.png" alt="cm-change-EIP-running-server.png" width="368" height="163" /></p>

<h4 id="change-eips-at-the-server-level">Change EIPs at the Server Level</h4>

<p>If your instance is running, you can associate an EIP at the <q>Current</q> Server level. Under the <strong>Info</strong> tab, select an EIP for the <q>Current Elastic IP</q> parameter.</p>

<p><img src="/img/cm-associate-EIP-server-level-edit.png" alt="cm-associate-EIP-server-level-edit.png" width="476" height="163" /></p>

<p><img src="/img/cm-associate-EIP-server-select.png" alt="cm-associate-EIP-server-select.png" width="476" height="163" /></p>

<h2 id="assign-an-elastic-ip-to-an-inactive-server">Assign an Elastic IP to an Inactive Server</h2>

<p>If you&#39;ve already created a deployment, but forgot to associate an EIP to a particular server or want to change current EIP, you can still change the IP settings before launching the server.</p>

<p>Inside your deployment, select the nickname of the stopped server that needs to be assigned an EIP or you can select the <q>Next</q> server configuration of a running server if you want the EIP to be assigned on a Relaunch action. Under the Server&#39;s Info tab, click Edit and select the appropriate Elastic IP for the server and make sure that the <q>Associate IP at launch</q> checkbox is checked. Click <strong>Save</strong>.</p>

<p><img src="/img/cm-inactive-server-edit.png" alt="cm-inactive-server-edit.png" width="447" height="115" /></p>

<h2 id="check-to-see-if-an-instance-is-using-an-eip">Check to See if an Instance is Using an EIP</h2>

<p>The easiest way to check whether or not an instance is using an EIP is to see if the public DNS name and (Public) IP address match your Elastic IP.</p>

<p><img src="/img/cm-EIP-server-confirmation.png" alt="cm-EIP-server-confirmation.png" width="507" height="266" /></p>

<p>Also, on the Info tab, you can view specific User Data information.</p>

<div class="alert alert-info" role="alert"><strong>Note:</strong><p>The <q>User Data</q> information does not list the current IP address of the instance; it lists the IP address that was originally used to launch the instance, so sometimes the listed IP will be a mismatch from what is listed above.</p>
</div>

<p><img src="/img/cm-server-user-data.png" alt="cm-server-user-data.png" width="722" height="144" /></p>

<h2 id="disassociate-an-elastic-ip-from-a-running-instance">Disassociate an Elastic IP from a Running Instance</h2>

<p>It&#39;s very easy to disassociate an Elastic IP address from a running instance. But, before you perform such an action, make sure that you really want to disassociate an Elastic IP address and not <a href="/cm/dashboard/clouds/aws/actions/ec2_elastic_ips_actions.html#Transfer%20an%20Elastic%20IP%20to%20a%20Running%20Instance">Transfer an Elastic IP to a Running Instance</a>.</p>

<p>When you disassociate an Elastic IP from a running instance, it will remain without a publicly addressable IP address until Amazon can assign a new dynamic IP address, which could take several minutes. You should also make sure that you&#39;ve already changed the DNS records accordingly to ensure that disassociating the EIP will not negatively impact your deployment.</p>

<p>You can disassociate an Elastic IP from a running instance at the deployment and instance levels.</p>

<h3 id="disassociate-an-elastic-ip-from-a-running-instance-deployment-level">Deployment Level</h3>

<p>At the deployment level, if you click on the Disassociate icon, you will receive a warning/confirmation window. Click OK to disassociate an Elastic IP from an instance.</p>

<p><img src="/img/cm-disassociate-EIP-deployment.png" alt="cm-disassociate-EIP-deployment.png" width="368" height="103" /></p>

<h3 id="disassociate-an-elastic-ip-from-a-running-instance-server-level">Server Level</h3>

<p>At the Server level, if you click on the Disassociate icon, you will receive a warning/confirmation window. Click OK to disassociate an Elastic IP from an instance.</p>

<p><img src="/img/cm-disassociate-EIP-server.png" alt="cm-disassociate-EIP-server.png" width="421" height="49" /></p>

<h2 id="assign-an-elastic-ip-after-an-instance-is-launched">Assign an Elastic IP After an Instance is Launched</h2>

<p>Once an instance is launched, you can associate a new or different Elastic IP to the running instance.</p>

<p>Once you select an Elastic IP and click the OK button, the instance will start to receive traffic for that IP address once the IP address has enough time to transfer over to the new instance (about 5 minutes). Therefore, make sure you are not stealing an Elastic IP from another running instance and that it is OK to inherit traffic from the previous owner of that Elastic IP. If you are using an Elastic IP that you know has not been used for over 24 hours, you will probably not inherit old traffic.</p>

<p>You can associate an Elastic IP to a running instance at the deployment and instance levels.</p>

<h3 id="assign-an-elastic-ip-after-an-instance-is-launched-deployment-level">Deployment Level</h3>

<p>At the deployment level you can click the instance&#39;s <strong>Edit</strong> icon and select the appropriate Elastic IP. If the <q>Public IP</q> column is not displayed, you will need to make it visible by using the <q>Show/Hide Columns</q> option. To change an instance&#39;s EIP, click the Edit icon and select an EIP from the list and click the OK icon.</p>

<p><img src="/img/cm-change-EIP-running-server.png" alt="cm-change-EIP-running-server.png" width="368" height="163" /></p>

<h3 id="assign-an-elastic-ip-after-an-instance-is-launched-server-level">Server Level</h3>

<p>To associate an Elastic IP at the instance level, under the Info tab, click the Edit icon to select an EIP to associate to the running instance.  If the instance already has an EIP, you can only choose a different EIP, otherwise click Cancel.</p>

<p><img src="/img/cm-associate-EIP-server-level-edit.png" alt="cm-associate-EIP-server-level-edit.png" width="476" height="163" /></p>

<h2 id="create-a-new-elastic-ip--eip-">Create a New Elastic IP (EIP)</h2>

<h3 id="create-a-new-elastic-ip--eip--overview">Overview</h3>

<p>Amazon&#39;s Elastic IP (EIP) addresses allow you to assign an IP address to an instance of your choice, which replaces the need for normal dynamic IP addressing in the cloud. Elastic IPs are static addresses, but are dynamically remappable IP addresses within the cloud, making it easier to manage servers and make global changes compared to static IPs on traditional hosting solutions. It&#39;s a way of ensuring that you don&#39;t &#39;inherit&#39; traffic from other&#39;s servers on EC2, because you&#39;re using an IP that&#39;s specifically reserved for your usage only, as long as you keep that EIP. EIPs allow you to mask instance or Availability Zone failures by rapidly remapping your public IP addresses to any instance in your account.</p>

<p>By default, an account can have a maximum of five Elastic IPs. Amazon charges you $0.01/hr for each <em>unused EIP</em> that you reserve because you&#39;re essentially taking away another public IP address from Amazon&#39;s IP pool that they can no longer provision to another EC2 instance. If you want to create more than 5 EIPs, you can submit a request to Amazon to increase your limit.</p>

<p>For a conceptual diagram and example of how you can use EIPs to update a site, read the section on <a href="/clouds/aws/amazon-ec2/aws_failover_architectures.html">Designing Failover Architectures on EC2</a>.</p>

<h3 id="create-a-new-elastic-ip--eip--prerequisites">Prerequisites</h3>

<p>Amazon Elastic IPs are EC2 region-specific. You cannot use an EIP that you created in EC2-US for an instance in a different region like EC2-EU. This tutorial assumes you are creating an EIP for use in a specific EC2-US region.</p>

<h3 id="create-a-new-elastic-ip--eip--steps">Steps</h3>

<h4 id="creating-an-elastic-ip">Creating an Elastic IP</h4>

<ol>
<li>Go to <strong>Clouds</strong> &gt; <em>your AWS region</em>.</li>
<li>Click <strong>IP Addresses</strong>.</li>
<li>Click <strong>New</strong>.</li>
</ol>

<p>In a couple of minutes a new Elastic IP address will be added to your account. Refresh your window and you should see the IP address that was just created.</p>

<ul>
<li>Click on the Elastic IP&#39;s default nickname, change it to <strong>fe1</strong> and click <strong>ok</strong>.</li>
</ul>

<p><img src="/img/cm-create-elastic-IP.png" alt="cm-create-elastic-IP.png" width="669" height="178" /></p>

<ul>
<li>Create another EIP and name it fe2. Write down the IP addresses for the front-end servers because you will need to list them in the next step.</li>
</ul>

<p><img src="/img/cm-list-EIP.png" alt="cm-list-EIP.png" width="734" height="208" /></p>

<p>Congratulations! You now have two Elastic IPs that you can associate to an EC2 instance. You can either attach an Elastic IP to instance at boot time or to a running instance. See <a href="/cm/dashboard/clouds/aws/misc/best_practices_for_elastic_ips.html">Best Practices for Elastic IP (EIP)</a> to learn more about the best practices on using EIPs.</p>

<h4 id="assign-elastic-ip-at-launch-time">Assign Elastic IP at Launch Time</h4>

<p>When you launch a server, you have the choice of assigning an Elastic IP at launch time. You will need to select these EIPs when you launch a server in one of the later Application Server Setup tutorials.</p>

<div class="alert alert-warning" role="alert"><strong>Warning!</strong><p>Be careful NOT not to steal an EIP from an existing server.</p>
</div>

<p><img src="/img/cm-assign-EIP-launch.png" alt="cm-assign-EIP-launch.png" width="645" height="502" /></p>

<h4 id="assign-elastic-ip-to-an-operational-server">Assign Elastic IP to an Operational Server</h4>

<p>Use the Edit action button to assign/reassign an EIP to a running server.</p>

<div class="alert alert-info" role="alert"><strong>Note:</strong><p>You will only see the edit button next to a running server.</p>
</div>

<p><img src="/img/cm-assign-EIP-operational1.png" alt="cm-assign-EIP-operational1.png" width="725" height="60" /></p>

<p><img src="/img/cm-assign-EIP-operational2.png" alt="cm-assign-EIP-operational2.png)" width="725" height="96" /></p>

<h2 id="switch-my-frontends-to-use-eiastic-ips">Switch My Frontends to Use EIastic IPs</h2>

<h3 id="switch-my-frontends-to-use-eiastic-ips-overview">Overview</h3>

<p>If you have running frontend servers that are using a DNS Provider for configuring their dynamic IP addresses and wish to switch to using an Elastic IP instead, you will need to follow the migration instructions below in order to ensure that your visitors do not experience any problems connecting to your site. If you do not take the necessary steps when changing the IP addresses of running frontend servers, your users could experience a sudden interruption of service and bad server requests as you suddenly switch to using Elastic IP addresses.</p>

<h4 id="migration-instructions---summary">Migration Instructions - Summary</h4>

<p>In order to follow best practices when switching to Elastic IP addresses you must follow the necessary precautionary steps.</p>

<ol>
<li>Create Elastic IPs for your frontend servers. See Create Elastic IPs (EIP).</li>
<li>Launch new servers using the appropriate frontend ServerTemplate that is using the latest RightImage<sup>TM</sup></li>
<li>Connect the new EIP frontend servers to the running application servers.</li>
<li>Connect the new EIP frontend servers to each other. <strong>Note</strong>: This step only applies to Basic Setups because in this scenario, frontends are also running application servers.</li>
<li>Change the DNS A records for your two frontends to point to the new EIP frontend servers.</li>
<li>Once no more requests are being served from the old frontend servers, terminate them.</li>
</ol>

<h4 id="sample-setup-diagrams">Sample Setup Diagrams</h4>

<p>Below are diagrams of two common setups. The Basic Setup is a 4-instance deployment where the frontends serve as both the load balancer and application server. In the Advanced Setup, the frontends are strictly load balancers that point to all of the application servers.</p>

<p><img src="/img/cm-switch-eip-setup.gif" alt="cm-switch-eip-setup.gif" width="654" height="401" /></p>

<h3 id="switch-my-frontends-to-use-eiastic-ips-steps">Steps</h3>

<h4 id="step-1:-create-two-elastic-ips-for-your-frontend-servers.">Step 1: Create two Elastic IPs for your frontend servers.</h4>

<p>If you have not reserved Elastic IP (EIP) addresses that you can later assign to your frontend servers, follow the Create Elastic IPs (EIP) tutorial and register two Elastic IPs. You will need an EIP for each frontend server.</p>

<h4 id="step-2:-launch-new-frontend-servers-using-the-most-recent-frontend-servertemplates">Step 2: Launch new frontend servers using the most recent frontend ServerTemplates</h4>

<p>Select the appropriate RightScale frontend ServerTemplate (PHP FrontEnd, Rails FrontEnd, etc.).</p>

<ol>
<li><p>Add a Server to your Deployment with the appropriate server information. Select the first Elastic IP (e.g. fe-1) that you want to associate with the first frontend. Click Add.
<img src="/img/cm-add-server-EIP1.png" alt="cm-add-server-EIP1.png" width="644" height="536" />  </p></li>
<li><p>Repeat the process for the second frontend server and select the other Elastic IP (e.g. fe-2).</p></li>
<li><p>Launch the new servers.</p></li>
<li><p>Once the servers are operational, continue to the next step.</p></li>
</ol>

<h4 id="step-3:-connect-the-new-eip-frontend-servers-to-the-running-application-servers">Step 3: Connect the new EIP frontend servers to the running application servers</h4>

<p>The next step it to connect the new EIP frontend servers to the running application servers by executing the LB get HA proxy config operational RightScript. The new frontend servers will try to get the configuration file from the running frontend servers. Once they get the configuration file, they can route traffic to the application servers.</p>

<p><img src="/img/cm-switch-eip-config2.gif" alt="cm-switch-eip-config2.gif" width="646" height="251" /></p>

<p><img src="/img/cm-switch-eip-connect2.gif" alt="cm-switch-eip-connect2.gif" width="646" height="251" /></p>

<h4 id="step-4:-connect-the-new-frontends-to-each-other">Step 4: Connect the new frontends to each other</h4>

<div class="alert alert-info" role="alert"><strong>Note:</strong><p>This step only applies to the Basic Setup. For Advanced Setups, skip to the next step.</p>
</div>

<p>Since the frontend instances are also running the application servers, you&#39;ll need to associate the new frontends together by running the LB mongrels to HA proxy connect RightScript.</p>

<p><img src="/img/cm-switch-eip-connect.gif" alt="cm-switch-eip-connect.gif" width="488" height="250" /></p>

<h4 id="step-5:-change-the-dns-a-records-to-point-to-the-elastic-ips">Step 5: Change the DNS A records to point to the Elastic IPs</h4>

<p>The new EIP frontend servers are now ready to serve traffic. With your DNS provider, lower the TTL on the A records that point to your frontend servers so that the change will be propagated more quickly. Wait a couple of minutes and then change the DNS A records to point to the new EIP frontend servers so incoming traffic will be routed to the frontends.</p>

<p><img src="/img/cm-switch-eip-dns.gif" alt="cm-switch-eip-dns2.gif" width="646" height="255" /></p>

<h4 id="step-6:-terminate-old-frontend-servers">Step 6: Terminate old frontend servers</h4>

<p>Once no more requests are being handled by the old frontend servers (FE-1, FE-2), you can safely terminate the instances. You can find information about HAproxy and Apache activity in the monitoring graphs. We recommend leaving the old frontend servers running for a couple of days to make sure everything is running properly, because if you experience any problems, it will be easy to switch back to the old frontends.</p>

<p><img src="/img/cm-switch-eip-terminate2.gif" alt="cm-switch-eip-terminate2.gif" width="646" height="255" /></p>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>