<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>CVE-2014-0160 - Updating OpenSSL library on RightImage</title><meta content="According to an OpenSSL Security Advisory, there is a serious vulnerability in the popular OpenSSL cryptographic software library." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../js/main.js"></script></head><body class="faq faq_CVE-2014-0160_Updating_OpenSSL_library_on_RightImage" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/faq/"><h4 class="list-group-heading"><span>Frequently Asked Questions</span></h4></a><a class="list-group-item" href="/faq/">General</a><a class="list-group-item" href="/faq/clouds/aws">AWS</a><a class="list-group-item" href="/faq/clouds/google">Google Cloud Platform</a><a class="list-group-item" href="/faq/clouds/azure">Microsoft Azure</a><a class="list-group-item" href="/faq/clouds/softlayer">SoftLayer</a><a class="list-group-item" href="/faq/clouds/vmware">VMware</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../">Flexera CMP Docs</a> &#x2F; <a href="./">RightScale General FAQs</a></p><div class="page-header"><h1>CVE-2014-0160 - Updating OpenSSL library on RightImage</h1></div><div class="main-content"><h2 id="overview">Overview</h2>

<p>According to this  <a href="https://www.openssl.org/news/secadv/20140407.txt">OpenSSL Security Advisory</a>, there is a serious vulnerability in the popular OpenSSL cryptographic software library. Only versions 1.0.1 and 1.0.2-beta releases of OpenSSL are affected including 1.0.1f and 1.0.2-beta1. Unfortunately, some operating system distributions may have been shipped with a potentially vulnerable version of OpenSSL including Ubuntu 12.04-LTS and CentOS 6.5. More information about the vulnerability can be found at  <a href="http://heartbleed.com/">http://heartbleed.com/</a></p>

<p>Both distributions have already released patch versions of the package which are now available in RightScale software repository mirrors.</p>

<ul>
  <li><a href="https://usn.ubuntu.com/usn/usn-2165-1/">https://usn.ubuntu.com/usn/usn-2165-1/</a></li>
  <li><a nocheck href="http://www.spinics.net/lists/centos-announce/msg04910.html">http://www.spinics.net/lists/centos-.../msg04910.html</a></li>
</ul>

<h2 id="resolution">Resolution</h2>

<p>To apply the changes on running servers, you can manually update the built-in OpenSSL version. To apply the update to new servers that are launched, you can change the software repository date to install the latest OpenSSL version.</p>

<p><strong>Note</strong>: If you are using a version of a v13 ServerTemplate (published by RightScale) your server may already have the security updates feature enabled. If enabled (Enable security updates = text:enable), you can reboot the server to automatically apply the patch to a running server.</p>

<h3 id="resolution-ubuntu">Ubuntu</h3>

<h4 id="for-running-servers">For Running Servers</h4>

<p>On a running Ubuntu 12.04-LTS server, navigate to the server&#39;s  <strong>Scripts tab</strong> in the dashboard and run the recipe <strong>rightscale::setup_security_updates</strong> which you can find in the <strong>Boot Scripts</strong> section. In the confirmation window, click the <q>Show advanced</q> option and select <q>**text: enable**</q> from the dropdown then click <strong>Continue</strong>. (<em>Note</em>: This will ONLY unfreeze the security repository, which will allow the latest security updates to be installed.)</p>

<p>After the recipe is successfully completed, verify if the repository was properly changed:</p>
<pre class="syntax-highlight plaintext"><code>root@ip-172-31-31-200:~# cat /etc/apt/sources.list.d/rightscale.sources.list |grep -i security
deb http://cf-mirror.rightscale.com/ubuntu_daily/latest precise-security main restricted multiverse universe
deb http://island5.rightscale.com/ubuntu_daily/latest precise-security main restricted multiverse universe
</code></pre>

<p>Once the security repository has been changed, you can proceed to apply the security update on the server by running the <strong>rightscale::do_security_updates</strong>  operational script, which will do a system package update to download and install the latest security patches.</p>

<p>Again, once the recipe is completed, you can ssh into the server to verify that the &#39;openssl&#39; package was properly updated to the latest version:</p>
<pre class="syntax-highlight plaintext"><code>root@ip-172-31-17-180:/etc/apt# dpkg -l libssl1.0.0 openssl
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name    Version                  Description
+++-=======-========================-================================================================
ii libssl   1.0.0 1.0.1-4ubuntu5.12  SSL shared libraries
ii openssl  1.0.1-4ubuntu5.12        Secure Socket Layer (SSL) binary and related cryptographic tools
</code></pre>

<h4 id="for-new-servers">For New Servers</h4>

<p>For new servers that you&#39;re going to launch, make sure to enable the security update input, which can be found in the RIGHTSCALE category. (Note: It&#39;s an advanced input so you must click on the <q>Show advanced inputs</q> option to see it in the dashboard.</p>
<pre class="syntax-highlight plaintext"><code>Enable security updates
rightscale/security_updates
text:enable
</code></pre>

<h3 id="resolution-centos">CentOS</h3>

<p>Unfortunately, the steps outlined above cannot be used for CentOS without running the risk of updating other packages, which might break package compatibility.  The problem with CentOS is that it does not allow you to do a security update alone (whereas Ubuntu does because of a separate security repository). The only way to apply the latest security updates is to <a href="http://support.rightscale.com/12-Guides/Dashboard_Users_Guide/Manage/Deployments/Servers/Actions/Edit_Frozen_Software_Repositories">unfreeze all repos</a> and update from latest.</p>

<p>Or you can create a RightScript and use it as a boot script  to download and install the openssl package and library directly from the <a href="http://mirror.centos.org/centos/7/updates/x86_64/Packages/">CentOS 7 Mirror</a> <a href="http://mirror-origin.rightscale.com/centos/6/updates/x86_64/archive/latest/Packages/">RightScale CentoOS 6 mirror</a>:</p>
<pre class="syntax-highlight plaintext"><code>openssl-1.0.1e-16.el6_5.7.x86_64.rpm
openssl-devel-1.0.1e-16.el6_5.7.x86_64.rpm
</code></pre>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>