<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Why is my CentOS 4.5 instance so outdated?</title><meta content="Starting on October 13th, 2011, RightScale has started properly mirroring the Centos 5.x base repository, located at /centos/5/." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../js/main.js"></script></head><body class="faq faq_Why_is_my_CentOS_5" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/faq/"><h4 class="list-group-heading"><span>Frequently Asked Questions</span></h4></a><a class="list-group-item" href="/faq/">General</a><a class="list-group-item" href="/faq/clouds/aws">AWS</a><a class="list-group-item" href="/faq/clouds/google">Google Cloud Platform</a><a class="list-group-item" href="/faq/clouds/azure">Microsoft Azure</a><a class="list-group-item" href="/faq/clouds/softlayer">SoftLayer</a><a class="list-group-item" href="/faq/clouds/vmware">VMware</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../">Flexera CMP Docs</a> &#x2F; <a href="./">RightScale General FAQs</a></p><div class="page-header"><h1>Why is my CentOS 4.5 instance so outdated?</h1></div><div class="main-content"><h2 id="background">Background</h2>

<p>When using our Centos 5.4 and early 5.6 Rightimages, we use a mirror of the /centos/5.4/ (or /centos/5.6/) repository directly from Centos. These mirrors can be seen online at <a href="http://mirror.rightscale.com">http://mirror.rightscale.com</a>&nbsp;under the /centos/ directory:</p>

<p><a href="http://mirror.rightscale.com/centos/5.4/">http://mirror.rightscale.com/centos/5.4/</a></p>

<p><a href="http://mirror.rightscale.com/centos/5.6/">http://mirror.rightscale.com/centos/5.6/</a></p>

<p>The way that Centos mirroring works is to release a major epoch version (such a 5.0 or 6.0), then provide <q>point releases</q> throughout the major release (such as 5.4 and 5.6). These <q>point</q> releases are nothing more than pre-defined <q>snapshots</q> of Centos 5.0 or 6.0 with all of the security updates, patches, etc. up to that point in time.</p>

<p>When Centos 5.4 was released, the /5.4/ mirror directory was created and regular updates were made to that repository. When Centos releases it&#39;s *next* point release (5.5 in this case), the /5.4/ directory STOPPED getting updated by design. The same occurs for /5.5/ when /5.6/ was released, and so forth and so on.</p>

<p>Our RightScale Centos 5.4 images are designed to point to the /centos/5.4/ directory, which by design has been out of date since the release of Centos 5.5. It only has all of the Centos 5.x updates to the point of 5.5 being released, so you may notice that your Centos 5.4 images will not be fully updated with security patches, updates, etc. and if you issue the command &#39;yum update&#39; it will not pull down the newest packages.</p>

<h2 id="answer">Answer</h2>

<p>Starting on October 13th, 2011, RightScale has started properly mirroring the Centos 5.x base repository, located at /centos/5/ here:</p>

<p><a href="http://mirror.rightscale.com/centos/5/">http://mirror.rightscale.com/centos/5/</a></p>

<p>This repository is a consistently updated Centos 5.x repository with any and all updates to the current point in time for *ANY* point release of Centos 5.x (5.4, 5.5, 5.6, etc.)</p>

<p>When using this repository, you can issue a &#39;yum update&#39; and Centos 5.x will be updated to the very latest packages, security updates, etc. which will essentially make it the latest Centos 5.x Point release (5.7 at the time of this writing).</p>

<p><strong>WARNING:</strong> Please beware that if you switch to this repository there may be some incompatibilities with various RightScripts on many of our default templates. As we move forward, we will be releasing Centos 5.x images that use this new /5/ repository and our server templates will be able to accommodate for that, but using pre-existing images and templates we may see some anomalies or other issues due to this change.</p>

<p><strong><u>How to use it:</u></strong></p>

<p>The premise behind using the updated /centos/5/ repository is fairly simple. We just need to update the /etc/yum.repos.d/ files on your instance to point to the correct location. These files should be modified:</p>
<pre class="syntax-highlight plaintext"><code>/etc/yum.repos.d/CentOS-Base.repo
/etc/yum.repos.d/CentOS-addons.repo
/etc/yum.repos.d/CentOS-centosplus.repo
/etc/yum.repos.d/CentOS-extras.repo
/etc/yum.repos.d/CentOS-updates.repo
</code></pre>

<p>These files should look something like this by default (notice they are using the /centos/5.4/ repo, not /5/):</p>
<pre class="syntax-highlight plaintext"><code>name = none
baseurl = http://ec2-us-west-mirror.rightscale.com/centos/5.4/os/i386/archive/20110317
  http://ec2-us-west-mirror1.rightscale.com/centos/5.4/os/i386/archive/20110317
  http://ec2-us-west-mirror2.rightscale.com/centos/5.4/os/i386/archive/20110317
  http://ec2-us-east-mirror.rightscale.com/centos/5.4/os/i386/archive/20110317
  http://ec2-us-east-mirror1.rightscale.com/centos/5.4/os/i386/archive/20110317
failovermethod=priority
gpgcheck=1
enabled=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5
</code></pre>

<p>To us the latest repository in the /5/ branch, we will want to modify these files to look something like this:</p>
<pre class="syntax-highlight plaintext"><code>name = none
baseurl = http://ec2-us-west-mirror.rightscale.com/centos/5/os/i386/archive/latest
  http://ec2-us-west-mirror1.rightscale.com/centos/5/os/i386/archive/latest
  http://ec2-us-west-mirror2.rightscale.com/centos/5/os/i386/archive/latest
  http://ec2-us-east-mirror.rightscale.com/centos/5/os/i386/archive/latest
  http://ec2-us-east-mirror1.rightscale.com/centos/5/os/i386/archive/latest
</code></pre>

<p>You can manually edit these files to update them to the latest /5/ branch using any text editor of your choosing. Once updated, issuing a yum update should attempt to update from these latest repos, giving you the latest Centos 5.x packages, security updates, etc.</p>
<pre class="syntax-highlight plaintext"><code>yum update
</code></pre>

<p><u><strong>Automated Script</strong></u></p>

<p>Below is an automated script that you can run to modify/update any /etc/yum.repos.d/* files to the /5/ and /archive/latest directory, then it automatically runs a &#39;yum update&#39; command for you. You can create a RightScript with this code or run it manually or as a boot script if you&#39;d like to automate this repository changeover:</p>
<pre class="syntax-highlight shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># CHANGE /MAJOR.MINOR FORMAT REPO URLS TO /MAJOR FORMAT, TO ALLOW ACCESS TO THE LATEST SECURITY UPDATES.</span>
sed -ri <span class="s1">'s/centos\/5\.[0-9]/centos\/5/g'</span> /etc/yum.repos.d/CentOS-<span class="k">*</span>.repo
sed -ri <span class="s1">'s/archive\/([0-9]*|latest)/archive\/latest/g'</span> /etc/yum.repos.d/CentOS-<span class="k">*</span>.repo

<span class="c"># Issue a YUM UPDATE</span>
yum update
</code></pre>

<p>This script will match any centos/5.x line and replace it with centos/5. The second sed line finds any archive/<date> or /archive/latest folder and replaces it with archive/latest, which indicates that you will always be getting the latest updates, patches, etc. from the /5/ repository (not frozen to a specific date).</p>

<p><strong>NOTE:</strong> We only have frozen repositories in the /5/ repo starting with 10/14/2011 and moving forward! You will not be able to freeze the /5/ repo branch to anything earlier than 10/14/2011!</p>

<p><u><strong>Still need help?</strong></u></p>

<p>Feel free to contact us by opening a ticket in the Top-Right corner of the RightScale dashboard (Support -&gt; Email) or by emailing <a href="mailto:support@rightscale.com" title="support@rightscale.com">support@rightscale.com</a> or calling us at (866) 787-2253.</p>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>