<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>CVE-2014-6271 - Updating BASH package on RightImage</title><meta content="Recent security audits of the bash source code have discovered a broad class of security vulnerabilities in the bash shell." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../js/main.js"></script></head><body class="faq faq_CVE-2014-6271_Updating_Bash_Package_on_RightImage" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/faq/"><h4 class="list-group-heading"><span>Frequently Asked Questions</span></h4></a><a class="list-group-item" href="/faq/">General</a><a class="list-group-item" href="/faq/clouds/aws">AWS</a><a class="list-group-item" href="/faq/clouds/google">Google Cloud Platform</a><a class="list-group-item" href="/faq/clouds/azure">Microsoft Azure</a><a class="list-group-item" href="/faq/clouds/softlayer">SoftLayer</a><a class="list-group-item" href="/faq/clouds/vmware">VMware</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../">Flexera CMP Docs</a> &#x2F; <a href="./">RightScale General FAQs</a></p><div class="page-header"><h1>CVE-2014-6271 - Updating BASH package on RightImage</h1></div><div class="main-content"><h2 id="overview">Overview</h2>

<p>Recent security audits of the bash source code have discovered a broad class of security vulnerabilities in the bash shell. These vulnerabilities vary in severity but their characteristics include remote shell code execution, denial-of-service, and heap/stack overflow leading to arbitrary machine code execution. All versions of bash, and therefore all major Linux distributions, are affected.</p>

<ul>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6271">CVE-2014-6271</a> -- high severity; the original <q>shellshock</q> bug</li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6277">CVE-2014-6277</a> -- high severity</li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6278">CVE-2014-6278</a> -- high severity</li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7169">CVE-2014-7169</a> -- medium severity</li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7186">CVE-2014-7186</a> -- unknown severity; potentially high</li>
<li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7187">CVE-2014-7187</a> -- unknown severity; potentially high</li>
</ul>

<p>As a quick test to see if a system is affected, you can run these commands:</p>
<pre class="syntax-highlight plaintext"><code>  env x='() { :;}; echo vulnerable' bash -c "echo test"
  env foo='() { echo vulnerable; }' bash -c foo
  rm echo; env X='() { (a)=&gt;\' sh -c "echo date"; cat echo
</code></pre>

<p>If the output includes the word <q>vulnerable,</q> or if a file named <q>echo</q> exists in the current directory, then your system is vulnerable.</p>

<p>RightScale&nbsp;has deployed&nbsp;rolling update to our affected infrastructure systems as the individual issues were disclosed and patches became available; no downtime or customer impact is expected. We are contacting our public-cloud partners to assess their responses to the vulnerability disclosure and will update our dashboard with any salient information.</p>

<p>The remainder of this document is devoted to helping you remediate the vulnerability in your own systems.</p>

<h2 id="resolution">Resolution</h2>

<p>RightScale updates its mirrors of vendor package repositories every day at approximately 06:00 UTC. In addition, whenever we become aware of a vendor-issued fix for a critical issue, we perform an on-demand mirror sync&nbsp;and post a system notification on our dashboard.</p>

<p>In order to install fixed bash versions, <u><strong>your machines must be configured to use the <q>latest</q> date of our frozen repositories</strong></u>. This document describes how to temporarily unfreeze your systems&#39; repos, apply the bash fix, and restore repos to their original freeze dates.</p>

<h3 id="resolution-prerequisite">Prerequisite</h3>

<p>To familiarize yourself with your OS vendor&#39;s response to these disclosures, refer to your vendor&#39;s security information portal and search by CVE name:</p>

<ul>
<li><a href="https://access.redhat.com/security/cve/">RedHat</a>&nbsp;-- online CVE tracker</li>
<li><a href="http://lists.centos.org/pipermail/centos-announce/">CentOS</a>&nbsp;--&nbsp;centos-announce&nbsp;mailing list</li>
<li><a href="http://people.canonical.com/%7Eubuntu-security/cve/">Ubuntu</a>&nbsp;-- online&nbsp;CVE tracker</li>
</ul>

<p>For specific information on&nbsp;CVE-2014-6271:</p>

<ul>
<li><a href="https://rhn.redhat.com/errata/RHSA-2014-1294.html">RedHat</a>&nbsp;(RHEL and derivatives)</li>
<li><a href="http://lwn.net/Articles/612980/">CentOS&nbsp;7</a>,&nbsp; <a href="http://lwn.net/Articles/612981/">CentOS&nbsp;6</a>, <a href="http://lwn.net/Articles/612979/" title="http://lwn.net/Articles/612979/">CentOS&nbsp;5</a></li>
<li><a href="http://people.canonical.com/%7Eubuntu-security/cve/2014/CVE-2014-6271.html">Ubuntu</a></li>
</ul>

<p>For specific information on CVE-2014-7169:</p>

<ul>
<li><a href="https://access.redhat.com/articles/1200223">RedHat</a> (RHEL and derivatives)</li>
<li><a href="http://lists.centos.org/pipermail/centos-announce/2014-September/020592.html">CentOS&nbsp;7</a>, <a href="http://lists.centos.org/pipermail/centos-announce/2014-September/020593.html">CentOS 6</a>, <a href="http://lists.centos.org/pipermail/centos-announce/2014-September/020591.html">CentOS 5</a></li>
<li><a href="http://people.canonical.com/%7Eubuntu-security/cve/2014/CVE-2014-7169.html">Ubuntu</a></li>
</ul>

<p>Note that the patched&nbsp;package version, when available, is noted for every vulnerability. In most cases a direct link is provided to the updated package files. This may be useful if automatic patching fails.</p>

<h3 id="resolution-patch-running-servers">Patch Running Servers</h3>

<h4 id="automatically-patch-rightlink-servers">Automatically Patch RightLink Servers</h4>

<p>We have created a RightScript that you can execute on any running instance to remediate the vulnerability without rebooting. The script is idempotent (safe to run multiple times) and it verifies that the vulnerability has been patched&nbsp;before exiting with success.</p>

<p>This script has been tested with CentOS, RHEL, and Ubuntu RightImages from the v13 lineage. It should work with any yum- or apt-based RightImage, may work with other systems, and should not harm systems in any case.</p>

<p>There are two versions of this script:</p>

<ul>
<li><p><a href="https://www.rightscale.com/library/right_scripts/CVE-2014-6272-Bash-Update-11H1/lineage/50793">CVE-2014-6272 Bash Update - 11H1</a>&nbsp;for instances based on our 11H1&nbsp;lineage</p></li>
<li><p><a href="https://www.rightscale.com/library/right_scripts/CVE-2014-6272-Bash-Update/lineage/50786">CVE-2014-6272 Bash Update</a>&nbsp;for instances based on all later lineages (12H1, v13, v14)</p></li>
</ul>

<p><strong>Note:</strong> This script tests for both known vulnerabilities, but bash is being audited and more disclosures may be forthcoming. To address potential unknowns, we have added a $FORCE option to the scripts, which will force the package update to run regardless of the vulnerability test output. You can import the latest revision (Rev 4 for 12H1, v13 and 14 and Rev 5 for 11H1) and set the $FORCE option to <q>true</q> which will force the package update to run anyway.</p>

<p>To use the auto-patching script, <u>verify your instances&#39; lineage</u>, import the appropriate script from the library, and run it as an <q>Any</q> script on all affected instances.</p>

<h4 id="manually-patch-servers">Manually Patch Servers</h4>

<p>To patch the server without using the RightScript as above, you can unfreeze the repositories from the command line by following these instructions:</p>

<ul>
<li>Edit each file&nbsp;in your package manager&#39;s sources directory</li>
<li>for Ubuntu, Debian and other apt-based systems, this is usually /etc/apt/sources.list.d</li>
<li><p>for CentOS, RHEL and other yum-based systems, this is usually /etc/yum.repos.d</p></li>
<li><p>Find URLs in each file that point to rightscale.com and end with a date string such as 20140307</p></li>
<li><p>Replace all occurrences of date string with&nbsp;latest</p></li>
<li><p>Optional: you can choose to only modify repositories that are update-related (contain <q>security</q> or <q>update</q> in the filename or URL).</p></li>
</ul>

<p>After following these steps, follow your OS vendor&#39;s installation instructions to apply the update. Some sample references below.</p>

<ul>
<li>For Redhat - <a href="https://access.redhat.com/node/1200223">https://access.redhat.com/node/1200223</a></li>
<li>For CentOS - <a href="http://centosnow.blogspot.com/2014/09/critical-bash-updates-for-centos-5.html">http://centosnow.blogspot.com/2014/0...-centos-5.html</a></li>
<li>For Ubuntu - <a href="https://wiki.ubuntu.com/Security/Upgrades">https://wiki.ubuntu.com/Security/Upgrades</a></li>
</ul>

<h3 id="resolution-patch-newly-launched-servers">Patch Newly-Launched Servers</h3>

<p>We strongly recommend updating your ServerTemplates as follows:</p>

<ul>
<li>Re-freeze all repositories to <q>latest</q> or <q>20140926</q></li>
<li>Ensure that your ServerTemplate has an <q>apply updates</q> script or recipe in its boot sequence</li>
</ul>

<p>If you cannot unfreeze repositories, then we recommend adding the automatic patching script to your ServerTemplate&#39;s boot sequence.</p>

<p>After you have updated your ServerTemplates, make sure to commit a new revision if necessary and update the <q>next</q> of every server and array to use the new revision.</p>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>