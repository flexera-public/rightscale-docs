<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Local and Proxied HTTP Requests</title><meta content="Guidelines and steps for performing local and proxied HTTP requests in the context of RightLink 10." name="description" /><meta content="initial-scale=1" name="viewport" /><meta content="10" name="docsearch:version_major" /><meta content="6" name="docsearch:version_minor" /><meta content="2" name="docsearch:version_patch" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../../js/main.js"></script></head><body class="rl10 rl10_reference rl10_reference_10" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/rl10"><h4 class="list-group-heading"><span>RightLink 10</span></h4></a><a class="list-group-item" href="../../about.html">About</a><a class="list-group-item" href="../../getting_started.html">Getting Started</a><a class="list-group-item" href="../../os_use_case_cloud_support.html">Operating System,<br> Use Case, and Cloud Support</a><a class="list-group-item" href="/rl10/reference">Reference</a><a class="list-group-item" href="/rl10/releases">Releases</a><a class="list-group-item" href="/rl10/tools">Tools</a><a class="list-group-item" href="/rl10/migration">Migration Guide</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../../">Flexera CMP Docs</a> &#x2F; <a href="../../">RightLink 10</a> &#x2F; <a href="../">Reference</a> &#x2F; <a href="./">Reference</a></p><div class="pull-right"><div class="btn-group"><a aria-haspopup="true" class="btn btn-success dropdown-toggle" data-toggle="dropdown" id="version-dropdown" type="button"><strong>Version:</strong>&nbsp;<span>10.6.2&nbsp;</span><span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="/rl10/reference/10.6.4/rl10_local_and_proxied_http_requests.html">10.6.4</a></li><li><a href="/rl10/reference/10.6.3/rl10_local_and_proxied_http_requests.html">10.6.3</a></li><li><a href="/rl10/reference/10.6.2/rl10_local_and_proxied_http_requests.html">10.6.2</a></li><li><a href="/rl10/reference/10.6.1/rl10_local_and_proxied_http_requests.html">10.6.1</a></li><li><a href="/rl10/reference/10.6.0/rl10_local_and_proxied_http_requests.html">10.6.0</a></li><li><a href="/rl10/reference/10.5.3/rl10_local_and_proxied_http_requests.html">10.5.3</a></li><li><a href="/rl10/reference/10.5.2/rl10_local_and_proxied_http_requests.html">10.5.2</a></li><li><a href="/rl10/reference/10.5.1/rl10_local_and_proxied_http_requests.html">10.5.1</a></li></ul></div></div><div class="page-header"><h1>Local and Proxied HTTP Requests</h1></div><div class="main-content"><p>RightLink 10 supports a number of local HTTP requests that broadly fall into two categories. For requests starting with <code>/api</code>, RightLink 10 acts as a proxy to the RightScale platform with added authentication (using the instance role that RightLink 10 is granted when it starts up). For requests starting with <code>/rll</code>, RightLink 10 itself handles the request. These requests are generally related to configuration or information related to RightLink 10 itself.</p>

<h2 id="performing-requests">Performing Requests</h2>

<p>RightLink 10 listens on a local ephemeral port and requires a special header to be passed for authorization. Both the port and token can be found in <code>/var/run/rightlink/secret</code> (Linux) and <code>C:\ProgramData\RightScale\RightLink</code> (Windows). If using curl or a similar tool, it is suggested that scripts source that file to populate environment variables. Requests must include an X-RLL-Secret authorization header with the values from the secret file.</p>

<p>Starting with RightLink 10.1.2, RightLink 10 ships with a command line client for making API requests called <a href="https://github.com/rightscale/rsc">RSC</a>, installed at <code>/usr/local/bin/rsc</code> (Linux) and <code>C:\Program Files\RightScale\RightLink\rsc.exe</code> (Windows). On the command see <code>rsc rl10 actions</code> for a list of available local requests handled by RightLink 10. See <code>rsc --rl10 cm15 actions</code> for a list of available RightScale API 1.5 actions. For requests proxied by RightLink 10, the credentials of the instance are used, which will be limited to a small subset of API 1.5 calls -- see below for details.</p>

<h2 id="http-requests-proxied-by-rightlink-10">HTTP Requests Proxied by RightLink 10</h2>

<p>RightLink 10 may proxy <a href="http://reference.rightscale.com/api1.5/index.html">API 1.5</a> requests using its own credentials making it simpler for scripts to perform operations such as adding tags to the instance, attaching volumes, etc. For requests proxied by RightLink 10, the credentials of the instance are used, which will be limited to a small subset of API 1.5 calls, denoted as having a <a href="http://reference.rightscale.com/api1.5/resources/ResourceTags.html#by_tag_required_roles">required role of instance</a>. The following API 1.5 resources and actions are allowed:</p>

<table><thead>
<tr>
<th>API Resource</th>
<th>Actions allowed</th>
</tr>
</thead><tbody>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceAlertSpecs.html">AlertSpecs</a></td>
<td>index, show, create, update, destroy</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceAlerts.html">Alerts</a></td>
<td>index, show, destroy, enable, disable, quench</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceAuditEntries.html">AuditEntries</a></td>
<td>index, create, update, append, detail, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceBackups.html">Backups</a></td>
<td>index, show, create, update, cleanup, destroy, restore</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceClouds.html">Clouds</a></td>
<td>index, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceDatacenters.html">Datacenters</a></td>
<td>index, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceInstanceCustomLodgements.html">InstanceCustomLodgements</a></td>
<td>index, show, create, update, destroy</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceInstances.html">Instances</a></td>
<td>index, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourcePlacementGroups.html">PlacementGroups</a></td>
<td>index, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceSessions.html">Sessions</a></td>
<td>index_instance_session</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceTags.html">Tags</a></td>
<td>by_tag, by_resource, multi_add, multi_delete</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceTasks.html">Tasks</a></td>
<td>show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceUserDatas.html">UserDatas</a></td>
<td>show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceVolumeAttachments.html">VolumeAttachments</a></td>
<td>index, show, create, destroy</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceVolumeSnapshots.html">VolumeSnapshots</a></td>
<td>index, show, create, destroy, copy</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceVolumeTypes.html">VolumeTypes</a></td>
<td>index, show</td>
</tr>
<tr>
<td><a href="http://reference.rightscale.com/api1.5/resources/ResourceVolumes.html">Volumes</a></td>
<td>index, show, create, destroy, update</td>
</tr>
</tbody></table>

<h3 id="http-requests-proxied-by-rightlink-10-examples">Examples</h3>

<p>The following sample code sets a tag on the current instance. Note the code must be run from a RightScript as RS_SELF_HREF is automatically populated for RightScripts and is equal to the <q>Instance HREF</q> available from a Server&#39;s info tab in the Cloud Management dashboard.</p>

<p>Using curl on Linux:</p>
<pre class="syntax-highlight shell"><code>  <span class="c"># Add the RightScale monitoring-active tag via curl</span>
  <span class="nb">source</span> /var/run/rightlink/secret
  curl -sS -X POST -H X-RLL-Secret:<span class="nv">$RS_RLL_SECRET</span> -g <span class="se">\</span>
     <span class="s2">"http://127.0.0.1:</span><span class="nv">$RS_RLL_PORT</span><span class="s2">/api/tags/multi_add?resource_hrefs[]=
     </span><span class="nv">$RS_SELF_HREF</span><span class="s2">&amp;tags[]=rs_monitoring:state=auth"</span>
</code></pre>

<p>Using rsc on Linux:</p>
<pre class="syntax-highlight shell"><code>  /usr/local/bin/rsc --rl10 cm15 multi_add /api/tags/multi_add
    resource_hrefs[]<span class="o">=</span><span class="nv">$RS_SELF_HREF</span> tags[]<span class="o">=</span>rs_monitoring:state<span class="o">=</span>auth
</code></pre>

<p>Using rsc on Windows:</p>
<pre class="syntax-highlight powershell"><code>  &amp; <span class="s2">"C:</span><span class="se">\P</span><span class="s2">rogram Files</span><span class="se">\R</span><span class="s2">ightscale</span><span class="se">\R</span><span class="s2">ightLink</span><span class="se">\r</span><span class="s2">sc.exe"</span> --rl10 cm15 multi_add
    /api/tags/multi_add resource_hrefs[]<span class="o">=</span><span class="nv">$RS_SELF_HREF</span> tags[]<span class="o">=</span>rs_monitoring:state<span class="o">=</span>auth
</code></pre>

<p>The following sample code gets the instance state and instance HREF and stores them in the instance_href and instance_state variables:</p>
<pre class="syntax-highlight shell"><code>  <span class="nv">RS_SELF_HREF</span><span class="o">=</span><span class="k">$(</span>rsc --rl10 cm15 --x1 <span class="s1">':has(.rel:val("self")).href'</span>
    index_instance_session /api/sessions/instance<span class="k">)</span>
  <span class="c"># instance state "booting", "operational", "stranded in booting", "decommissioning"</span>
  <span class="nv">instance_state</span><span class="o">=</span><span class="k">$(</span>rsc --rl10 cm15 --x1 <span class="s1">'.state'</span> index_instance_session
    /api/sessions/instance<span class="k">)</span>
</code></pre>

<h2 id="http-requests-handled-by-rightlink-10-itself">HTTP Requests Handled by RightLink 10 Itself</h2>

<p>The following requests are handled by RightLink 10. The same X-RLL-Secret header is required for authorization.</p>

<h4 id="/rll/upgrade"><code>/rll/upgrade</code></h4>

<ul>
<li>Function: Relaunch the RightLink process using a specified binary (Linux only)</li>
<li>Actions: upgrade</li>
<li>Parameters: exec=&lt;absolute_path_to_binary&gt;</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 upgrade /rll/upgrade <span class="nb">exec</span><span class="o">=</span>/tmp/rightlink
</code></pre>

<h4 id="/rll/env"><code>/rll/env</code></h4>

<ul>
<li>Function: List all global script environment variables</li>
<li>Actions: index</li>
<li>Parameters: None</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 index /rll/env
</code></pre>

<h4 id="/rll/env/:name"><code>/rll/env/:name</code></h4>

<ul>
<li>Function: Manipulate the global script environment variables</li>
<li>Actions: show, update, delete</li>
<li>Parameters: payload=&lt;variable_value&gt;</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 update /rll/env/RS_DISTRO <span class="nv">payload</span><span class="o">=</span>centos
</code></pre>

<h4 id="/rll/run/right_script"><code>/rll/run/right_script</code></h4>

<ul>
<li>Function: Synchronously run a RightScript attached to ServerTemplate</li>
<li>Actions: run_right_script</li>
<li>Parameters: right_script=&lt;right_script_name&gt; arguments=&lt;INPUT_NAME&gt;=&lt;type:value&gt;</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 run_right_script /rll/run/right_script
    <span class="nv">right_script</span><span class="o">=</span><span class="s2">"RL10 Linux Setup Automatic Upgrade"</span>
    <span class="nv">arguments</span><span class="o">=</span><span class="nv">ENABLE_AUTO_UPGRADE</span><span class="o">=</span>text:false
</code></pre>

<h4 id="/api/right_net/scheduler/schedule_right_script"><code>/api/right_net/scheduler/schedule_right_script</code></h4>

<ul>
<li>Function: Asynchronously run a RightScript attached to ServerTemplate</li>
<li>Actions: schedule_right_script</li>
<li>Parameters: right_script=&lt;right_script_name&gt; arguments=&lt;INPUT_NAME&gt;=&lt;type:value&gt;</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc --rl10 cm15 schedule_right_script /api/right_net/scheduler/schedule_right_script
    <span class="nv">right_script</span><span class="o">=</span><span class="s2">"RL10 Linux Setup Automatic Upgrade"</span>
    <span class="nv">arguments</span><span class="o">=</span><span class="nv">ENABLE_AUTO_UPGRADE</span><span class="o">=</span>text:false
</code></pre>

<h4 id="/rll/proc"><code>/rll/proc</code></h4>

<ul>
<li>Function: List all process variables</li>
<li>Actions: index</li>
<li>Parameters: None</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 index /rll/proc
</code></pre>

<h4 id="/rll/proc/:name"><code>/rll/proc/:name</code></h4>

<ul>
<li>Function: List a specific process variable</li>
<li>Actions: show</li>
<li>Parameters: None</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 show /rll/proc/shutdown_kind
</code></pre>

<p>Of special note is /rll/proc/shutdown_kind, which is available using RightLink 10.1.3 and newer. During decommission, shutdown_kind will be set to <q>reboot</q>, <q>stop</q>, or <q>terminate</q> if one of these actions was initiated from the RightScale dashboard or API. It will be an empty string if any of those actions was initiated from the server&#39;s command line or the cloud&#39;s api/console. See <a href="https://github.com/rightscale/rightlink_scripts/blob/master/rll/shutdown-reason.sh">Linux Shutdown Reason</a> or <a href="https://github.com/rightscale/rightlink_scripts/blob/master/rlw/shutdown-reason.ps1">Windows Shutdown Reason</a> on how to query if the server is stopping, rebooting, or terminating.</p>

<h4 id="/rll/tss/hostname"><code>/rll/tss/hostname</code></h4>

<ul>
<li>Function: Manipulate the hostname associated with TSS</li>
<li>Actions: get_hostname, put_hostname</li>
<li>Parameters: hostname=&lt;hostname_value&gt;</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 put_hostname /rll/tss/put_hostname <span class="nv">hostname</span><span class="o">=</span>tss3.rightscale.com
</code></pre>

<h4 id="/rll/tss/control"><code>/rll/tss/control</code></h4>

<ul>
<li>Function: Manipulate the value of monitoring control</li>
<li>Actions: show, update</li>
<li>Parameters: enable_monitoring=&lt;control_value&gt; (true, false, none, util, extra, all)</li>
<li>Examples:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 show /rll/tss/control
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 update /rll/tss/control <span class="nv">enable_monitoring</span><span class="o">=</span><span class="nb">true</span>
</code></pre>

<h4 id="/rll/tss/exec"><code>/rll/tss/exec</code></h4>

<ul>
<li>Function: List all configured custom monitoring plugin executables</li>
<li>Actions: index</li>
<li>Parameters: None</li>
<li>Example:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 index /rll/tss/exec
</code></pre>

<h4 id="/rll/tss/exec/:name"><code>/rll/tss/exec/:name</code></h4>

<ul>
<li>Function: Add, update, view, or remove a configured custom monitoring plugin executable</li>
<li>Actions: create, show, update, destroy</li>
<li>Parameters: executable=&lt;executable_path&gt; arguments[]=&lt;executable_argument&gt;</li>
<li>Examples:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 create /rll/tss/exec/haproxy-stat <span class="nv">executable</span><span class="o">=</span><span class="s1">'/var/run/haproxy-stat'</span>
    arguments[]<span class="o">=</span><span class="s1">'-h'</span> arguments[]<span class="o">=</span><span class="s1">'localhost'</span>
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 show /rll/tss/exec/haproxy-stat
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 update /rll/tss/exec/harpoxy-stat <span class="nv">executable</span><span class="o">=</span><span class="s1">'/var/run/haproxy-stat'</span>
    arguments[]<span class="o">=</span><span class="s1">'-h'</span> arguments[]<span class="o">=</span><span class="s1">'localhost'</span> arguments[]<span class="o">=</span><span class="s1">'-p'</span> arguments[]<span class="o">=</span><span class="s1">'20'</span>
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 destroy /rll/tss/exec/haproxy-stat
</code></pre>

<h4 id="/rll/docker/control"><code>/rll/docker/control</code></h4>

<ul>
<li>Function: Manipulate the Docker integration</li>
<li>Actions: show, update</li>
<li>Parameters: enable_docker=&lt;control_value&gt; (none, tags, all) docker_host=<docker_host_or_socket_uri></li>
<li>Examples:</li>
</ul>
<pre class="syntax-highlight shell"><code>  rsc rl10 show /rll/docker/control
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 update /rll/docker/control <span class="nv">enable_docker</span><span class="o">=</span>tags
</code></pre>
<pre class="syntax-highlight shell"><code>  rsc rl10 update /rll/docker/control <span class="nv">enable_docker</span><span class="o">=</span>all
</code></pre>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>