<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>CloudApp Permissions in Self-Service</title><meta content="This page describes a change to how permissions are handled and how to upgrade your RightScale Self-Service CloudApps from the "legacy" model to the new one." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../js/main.js"></script></head><body class="ss ss_guides ss_guides_ss_permissions" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/ss/"><h4 class="list-group-heading"><img src="../../img/product-self-service.svg" /><span>Self-Service</span></h4></a><a class="list-group-item" href="../about.html">About</a><a class="list-group-item" href="/ss/getting_started">Getting Started</a><a class="list-group-item" href="/ss/guides">Guides</a><a class="list-group-item" href="/ss/reference">Reference</a><a class="list-group-item" href="/ss/tools">Tools</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><div class="page-header"><h1>CloudApp Permissions in Self-Service</h1></div><div class="main-content"><h2 id="introduction">Introduction</h2>

<p>When a CloudApp is launched, or is operated on during its lifecycle, it is interacting with any number of APIs. Most commonly the CloudApp interacts with the RightScale CM API, but it can also interact with other APIs through HTTP functions or, in the future, with Plugins (coming soon).</p>

<p>When a CloudApp interacts with an API, it must use credentials to do so and those credentials are associated with a set of permissions on the external system. For example, if you were to launch a CloudApp, the API calls to RightScale CM API would, historically, be authenticated with your personal account and therefore CM would enforce the permissions that you have.</p>

<p>This page describes a change to how permissions are handled and how to upgrade your CloudApps from the <q>legacy</q> model to the new one.</p>

<h2 id="cloudapp-permission-strategies">CloudApp Permission Strategies</h2>

<p>There are two types of permission strategies in use in Self-Service:</p>

<h3 id="cloudapp-permission-strategies-impersonation">Impersonation</h3>

<p>The system <strong>impersonates</strong> the user when making API calls. By impersonating the user, that user&#39;s permissions are enforced by the other system (such as Cloud Management).</p>

<p><strong>Applies To</strong></p>

<ul>
<li>Any launch from the Designer UI</li>
<li>Any launch from the Manager API using <a href="http://reference.rightscale.com/selfservice/manager/index.html#/1.0/controller/V1::Controller::Execution/create"><code>Execution.create</code></a></li>
</ul>

<h3 id="cloudapp-permission-strategies-delegation">Delegation</h3>

<p>Upon <em>publishing to the Catalog</em>, the requisite permissions are <q>delegated</q> to the CloudApp and any user launching that CloudApp will inherit those permissions <em>only in the scope of operating on that CloudApp</em>. This capability allows you to publish CloudApps to the Catalog that any user can launch without giving the user the requisite permissions in Cloud Management (or other systems).</p>

<p><strong>Applies To</strong></p>

<ul>
<li>Any launch from the Catalog UI</li>
<li>Any launch from the Catalog API (<a href="http://reference.rightscale.com/selfservice/catalog/index.html#/1.0/controller/V1::Controller::Application/launch"><code>Application.launch</code></a>)</li>
</ul>

<h3 id="cloudapp-permission-strategies-how-delegation-works">How Delegation Works</h3>

<p>There are two primary components to delegation: the permissions required by the CloudApp, and the permissions that the <q>publisher</q> of the CloudApp has.</p>

<h4 id="cloudapp-permissions">CloudApp Permissions</h4>

<p>Permissions for a given CloudApp fall into two categories: implicit and explicit.</p>

<p><strong>Implicit</strong> permissions are those that are generated automatically by Self-Service based on the declarations defined in the CloudApp. For example, if a CloudApp has a Server resource declaration, the system will automatically infer that certain permissions are required on the <code>Server</code> resource in Cloud Management (in this case, specifically: <code>create</code>, <code>launch</code>, <code>show</code>, <code>index</code>, <code>terminate</code>, <code>destroy</code>). Other types of resources may require different sets of actions. All CloudApps are required to have permissions on the <code>Deployment</code> resource, since that is what is created for every CloudApp launch.</p>

<p><strong>Explicit</strong> permissions are those that are created using <a href="../reference/ss_CAT_file_language.html#permissions">the permissions declaration</a> in the CAT file itself. These permissions must be defined by the Designer if any RCL code is used that interacts with resources in addition to those defined as resource declarations. For example, if the CAT contains RCL code that reads and writes <code>Credential</code> objects, a permisison declaration must exist that specifies the CAT requires read/write from the <code>Credentials</code> resource or else some users may fail to launch the CloudApp.</p>

<p>All of the permissions are shown when publishing a CloudApp to the Catalog for your convenience. Explicit permissions are shown based on the declaration names created in the CAT, while implicit permissions are shown on a per-resource basis using a system-generated name (for example a <code>volume</code> resource declaration will generate an implicit permission called <code>volume_permissions</code>).</p>

<h4 id="permissions-required-for-publishing">Permissions Required for Publishing</h4>

<p>In order for a Designer to publish a CloudApp to the Catalog, she must have all of the permissions specified in the CAT (both implicit and explicit). If the Designer does not have all of the required permissions, she will not be permitted to publish the CloudApp to the Catalog.</p>

<p>Note that although the system does log the source of delegated permissions, it is not required that the <q>publisher</q> maintain those permissions throughout the lifecycle of the CloudApp. The check is made during the publish step only - once the user has been verified to have the required permissions, the permissions are then delegated to the CloudApp in the Catalog as long as it exists there.</p>

<h4 id="granting-a-user-delegated-permissions">Granting a User Delegated Permissions</h4>

<p>When a CloudApp is launched from the Catalog, the system performs a <q>union</q> of the permissions delegated to the CloudApp and the permissions the user has and uses that union as the permission set for all of the following API calls to the Cloud Management API. For example, if a user has <code>actor</code> role in Cloud Management, and the CloudApp permissions contain an explicit permission declaration to <code>read</code> the <code>Credentials</code> resource (which would require <code>admin</code> role in Cloud Management), the user&#39;s session contains both the <code>actor</code> and <code>admin</code> role only in the context of operating on the CloudApp through Self-Service.</p>

<h4 id="delegated-permissions-and-cm-roles">Delegated Permissions and CM Roles</h4>

<p>Today, Cloud Management permissions are managed not at the resource level, but at the Role level. For example, in CM you can&#39;t grant someone <q>write access to Security Groups</q>, instead you grant them <q>security_manager</q> role, which allows not only write access to Security Groups, but also a set of other related permissions. When using permissions with CloudApps, the system is able to grant the appropriate roles based on the resources being used. For example, if a <code>security_group</code> resource declaration exists in the CAT, the system will know to grant the <code>security_manager</code> role. Similarly, if a permissions declaration contains read access for <code>credentials</code>, the system will know to grant the <code>admin</code> role for Cloud Management.</p>

<h2 id="updating-legacy-cloudapps">Updating Legacy CloudApps</h2>

<p>Any CloudApp uploaded to Self-Service and published to the Catalog prior to June 24 will not contain <q>delegation</q> capabilities. For your convenience, you can locate these CloudApps by navigating to the Catalog and selecting <q>card view</q>. The cards will show a <q>Legacy permissions</q> indicator to Designers and Admins only so that you can re-upload and re-publish the CloudApp.</p>

<p><img src="/img/ss-legacy-permissions-indicator.png" alt="Legacy Permissions Indicator" width="477" height="311" /></p>

<p>In order to get the benefit of delegated permissions, CATs must be re-uploaded to Self-Service and re-published to the Catalog. Note that if the CAT contains RCL code that interacts with other resources, you may also need to add <a href="../reference/ss_CAT_file_language.html#permissions">permissions declarations</a> in order to capture all of the required permissions.  </p>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>