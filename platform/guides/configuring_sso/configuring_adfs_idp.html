<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Configuring ADFS</title><meta content="Procedure for connecting ActiveDirectory Federation Services (ADFS) to the RightScale Cloud Management Platform." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../../js/main.js"></script></head><body class="platform platform_guides platform_guides_configuring_sso platform_guides_configuring_sso_configuring_adfs_idp" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/platform"><h4 class="list-group-heading"><img src="../../../img/platform-mark.svg" /><span>Platform</span></h4></a><a class="list-group-item" href="/platform/guides">Guides</a><a class="list-group-item" href="../../saml.html">SAML</a><a class="list-group-item" href="../../../security/">Security</a><a class="list-group-item" href="../../../configuration-management-tool-integration/">Configuration Management Integration</a><a class="list-group-item" href="../../open-source-ack/">Open Source License Acknowledgement</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../../">Flexera CMP Docs</a> &#x2F; <a href="../../">Platform Docs</a> &#x2F; <a href="../">Guides</a> &#x2F; <a href="./">Configuring Single Sign-On (SSO)</a></p><div class="page-header"><h1>Configuring ADFS</h1></div><div class="main-content"><h2 id="creating-a-trust-relationship-in-adfs">Creating a trust relationship in ADFS</h2>

<ol>
<li>Open the ADFS administration snap-in.</li>
<li>Right-click <q>Trust Relationships > Relying Party Trusts</q> and choose <q>Add Relying Party Trust.</q></li>
<li>On the second screen of the wizard, enter RightScale&#39;s <a href="https://login.rightscale.com/login/saml2/metadata">SP metadata URL</a>.

<ul>
<li>Review the auto-configured settings to ensure they look reasonable</li>
<li>Save the new trust relationship</li>
</ul></li>
<li>Right-click on the new trust relationship, choose <q>Properties,</q> and navigate to the <q>Advanced</q> tab

<ul>
<li>Change <q>Secure hash algorithm</q> to <q>SHA-1</q></li>
<li>Click <q>OK</q> to save the changes</li>
</ul></li>
<li>Add a new transform claim rule for the trust relationship.

<ul>
<li>Choose the rule type <q>Send LDAP attributes as claims</q></li>
<li>Choose ActiveDirectory as the attribute store.</li>
<li>Configure mappings for Name ID and the three <a href="../../saml">RightScale-required attributes</a> as shown in the screenshow below.</li>
</ul></li>
</ol>

<p><img src="/img/platform-guides-saml-adfs-rule-mapping.png" alt="Transform Claim Rule Mapping" width="1402" height="1130" /></p>

<h2 id="creating-a-trust-relationship-in-rightscale">Creating a trust relationship in RightScale</h2>

<p>In this section, we will set up a trust relationship for ADFS within RightScale. As a result, RightScale will know your identity provider&#39;s information, which permits your IdP to initiate logins.</p>

<div class="alert alert-warning " role="alert"><strong>Note:</strong><p>You must have the <q>enterprise_manager</q> role for the RightScale account you wish to associate with ADFS.</p>
</div>

<ol>
<li>In a new tab in your browser, navigate to the account you wish to administer in RightScale.</li>
<li>In the blue nav menu at the top of the screen, select <q>Settings</q> and navigate to <q>Single Sign-on</q> under the <q>Enterprise</q> section. (If you do not see this option, then you do not have the <q>enterprise_manager</q> role for the current account.)</li>
<li>On the resulting page, you should see a list of existing SAML Identity Providers near the top and, above the list, you should see a <q>New</q> button. Click the <q>New</q> button.</li>
<li><p>In the resulting form, enter the following values:</p>

<table><thead>
<tr>
<th>Input Name</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td><em>Display Name</em></td>
<td>Your choice, e.g. <code>MyCompany ADFS</code></td>
</tr>
<tr>
<td><em>Login Method</em></td>
<td>Leave <q>Allow RightScale-initiated SSO using a discovery hint</q> unchecked</td>
</tr>
<tr>
<td><em>SAML SSO Endpoint</em></td>
<td>Enter ADFS&#39; SAML request endpoint e.g. <code>https://mycompany.com/adfs/ls/</code></td>
</tr>
<tr>
<td><em>SAML EntityID</em></td>
<td>Enter ADFS&#39; entity ID e.g. <code>http://mycompany.com/adfs/services/trust</code></td>
</tr>
<tr>
<td><em>SAML Signing Certificate</em></td>
<td>Upload the x509 certificate that ADFS uses to sign its SAML assertions</td>
</tr>
</tbody></table></li>
<li><p>Click the <q>Save</q> button and you will be returned to the Identity Provider list page. You should see your newly created IdP in this list.</p></li>
<li><p>Next, click the button to the right to test your IdP configuration. You should be redirected to your IdP where you can log in and complete the SSO login. If you didn&#39;t assign the application created when configuring ADFS to your ADFS user, then you will need to do so before completing this step.</p></li>
<li><p>Finally, if you wish to have users provisioned via SSO then you will need to <a href="../../saml/registering_idp_authority.html">Enable authority for your new IdP over the SAML-asserted email domains</a>.</p></li>
</ol>

<p>This concludes configuration of your SAML Identity Provider in RightScale. Please continue on to <a href="index.html#detailed-instructions-step-3--test-idp-initiated-single-sign-on">Step 3: Test IdP-Initiated Single Sign-On</a>.</p>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>