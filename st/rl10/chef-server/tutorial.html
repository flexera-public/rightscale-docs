<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Chef Server for Linux (RightLink 10) - Tutorial</title><meta content="Use this RightLink 10 ServerTemplate tutorial to set up a Chef Server load balancer server or servers in a public or private cloud environment." name="description" /><meta content="initial-scale=1" name="viewport" /><link href="https://my.rightscale.com/favicon.ico" rel="icon" /><!--Stylesheets--><link href="../../../css/main.css" rel="stylesheet" /><!--JavaScript--><script src="../../../js/main.js"></script></head><body class="st st_rl10 st_rl10_chef-server st_rl10_chef-server_tutorial" data-spy="scroll" data-target="#subnav-right"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid max-width"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="../../../img/FX_Logo_pos.png" /></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a target="_blank" href="https://community.flexera.com/t5/Flexera-Community/ct-p/Flexera_Community">Community</a></li><li><a target="_blank" href="https://www.flexera.com/blog/">Blog</a></li><li><a target="_blank" href="https://www.flexera.com/about-us/contact-us.html">Contact</a></li><li><a target="_blank" href="https://login.rightscale.com/login/session/new">Log In</a></li></ul><ul class="nav navbar-nav navbar-right nav-status"><li class="nav-al-search"><a href="../../../search.html">Search</a></li></ul><form class="navbar-form navbar-left" role="search" action="/search.html" method="get" ><div class="form-group"><input class="form-control input-sm" id="site-search" placeholder="Search" type="text" name="q" /></div><input type="submit" style="position: absolute; left: -9999px"/></form><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript"> docsearch({apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f',indexName: 'rightscale',inputSelector: '#site-search', debug: false, autocompleteOptions: {autoselect: false}});</script></div></div></nav><div class="wrap"><div class="container-fluid max-width"><div class="row"><div class="col-sm-3"><div class="clearfix"><aside class="main-nav" role="complementary"><nav class="list-group" role="navigations"><a class="list-group-item" href="/st"><h4 class="list-group-heading"><img src="../../../img/product-cloud-management.svg" /><span>ServerTemplates</span></h4></a><a class="list-group-item" href="../../about.html">About</a><a class="list-group-item" href="/st/rl10">Version RL10</a><a class="list-group-item" href="../../open-source/">Open Source</a></nav></aside><div class="callout"><a href="/api/"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-api.svg" /><h4>Flexera CMP APIs</h4></div><span>See the API reference documentation for all of our products.</span></div></div></a></div><div class="callout"><a href="../../../ca/cloud_comp/ca_getting_started_with_cloud_comparison.html"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-cloud-blue.svg" /><h4>Cloud Comparison</h4></div><span>Compare public clouds based on the features they offer.</span></div></div></a></div><div class="callout"><a target="_blank" href="http://feedback.rightscale.com"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-feedback.svg" /><h4>Feedback</h4></div><span>Get in touch and we’ll get back to you as soon as we can.</span></div></div></a></div><div class="callout"><a href="/release-notes"><div class="panel panel-default"><div class="panel-body"><div class="callout-title"><img src="../../../img/icon-notes.svg" /><h4>Release Notes</h4></div><span>See the notes for the latest releases of each application and what’s changed.</span></div></div></a></div></div></div><div class="col-sm-9"><div class="row"><div class="col-sm-9"><div class="clearfix"><p><a href="../../../">Flexera CMP Docs</a> &#x2F; <a href="../../">ServerTemplates</a> &#x2F; <a href="../">Version RightLink 10 ServerTemplates</a> &#x2F; <a href="./">Chef Server for Linux (RightLink 10)</a></p><div class="page-header"><h1>Chef Server for Linux (RightLink 10) - Tutorial</h1></div><div class="main-content"><h2 id="objective">Objective</h2>

<p>To set up a Chef Server load balancer server or servers in a public or private cloud environment.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>You must log in under a RightScale account with <q>actor</q> and <q>library</q> user roles in order to complete the tutorial.</li>
<li>For Amazon EC2 and other clouds that support security groups, you must have a security group defined with TCP port 22 open for SSH access, the appropriate web port (80 for HTTP or 443 for HTTPS) open for client access, and any other port and protocol access required by your load balancers. Also, remember that iptables is installed by default on all servers.</li>
<li>We strongly recommend that you set up credentials for password values and any other sensitive data included as Chef recipe inputs.</li>
</ul>

<h2 id="overview">Overview</h2>

<p>This tutorial describes the steps for launching one Chef server in the cloud, using the <a href="http://www.rightscale.com/library/server_templates/Chef-Server-for-Linux-RightLin/lineage/57238">Chef Server for Linux (RightLink 10)</a> ServerTemplate.</p>

<h2 id="create-credentials">Create Credentials</h2>

<h2 id="create-elastic-ips--aws-only-">Create Elastic IPs (AWS only)</h2>

<p>If you are launching Chef servers in EC2, it is recommended that you use Elastic IPs. If you haven&#39;t already done so, create an Elastic IP for the Chef Server. Be sure to create the Elastic IPs in the AWS region (e.g. &#39;us-east&#39;) where you intend to launch the load balancer servers. See <a href="/cm/dashboard/clouds/aws/actions/ec2_elastic_ips_actions.html#create-a-new-elastic-ip--eip-">Create Elastic IPs (EIP)</a>.</p>

<h2 id="steps">Steps</h2>

<h3 id="steps-add-a-server">Add a Server</h3>

<p>Follow these steps to add a load balancer server to the deployment.</p>

<ol>
<li>Go to the MultiCloud Marketplace (<strong>Design</strong> &gt; <strong>MultiCloud Marketplace</strong> &gt; <strong>ServerTemplates</strong>) and import the most recently published revision of the <a href="http://www.rightscale.com/library/server_templates/Chef-Server-for-Linux-RightLin/lineage/57238">Chef Server for Linux (RightLink 10)</a> ServerTemplate into the RightScale account.</li>
<li>From the imported ServerTemplate&#39;s show page, click the <strong>Add Server</strong> button.</li>
<li>Select the cloud for which you will configure a server.</li>
<li>Select the deployment into which the new server will be placed.</li>
<li>Next, the Add Server Assistant wizard will walk you through the remaining steps that are required to create a server based on the selected cloud.

<ul>
<li><strong>Server Name</strong> - Provide a nickname for your new load balancer server (e.g., lb1).</li>
<li>Select the appropriate cloud-specific resources that are required in order to launch a server into the chosen cloud. The required cloud resources may differ depending on the type of cloud infrastructure. If the cloud supports multiple datacenters / zones, select a specific zone. Later, when you create the other load balancer server you will use a different datacenter / zone to ensure high-availability. For more information, see <a href="/cm/dashboard/design/server_templates/servertemplates_actions.html#add-server-assistant">Add Server Assistant</a>.</li>
<li>If you are using Elastic IPs (AWS EC2 only), select an existing Elastic IP from the drop-down, or click New to create a new one.</li>
</ul></li>
<li>Click <strong>Confirm</strong>, review the server&#39;s configuration and click <strong>Finish</strong> to create the server.</li>
</ol>

<h3 id="steps-configure-inputs">Configure Inputs</h3>

<p>The next step is to define the properties of your load balancer server or servers by entering values for inputs. As a best practice, you should define required inputs for the servers at the deployment level. For a detailed explanation of how inputs are defined and used in Chef recipes and RightScripts, see <a href="/cm/rs101/inheritance_of_inputs.html">Inheritance of Inputs</a>.</p>

<p>To enter inputs for the Chef recipes that will run on your load balancers, open the deployment&#39;s <strong>Inputs</strong> tab, click <strong>Edit</strong>, and use the following settings to configure input values. We recommend that you set up credentials for password values and any other sensitive data as shown in the examples.</p>

<h4 id="chef-server-inputs">Chef Server Inputs</h4>

<table><thead>
<tr>
<th>Input Name</th>
<th>Description</th>
<th>Example Value</th>
</tr>
</thead><tbody>
<tr>
<td>CHEF_SERVER_ADDONS</td>
<td>A comma separated list of chef server add-ons</td>
<td>text: manager,reporting</td>
</tr>
<tr>
<td>CHEF_SERVER_FQDN</td>
<td>The FQDN of the chef server.</td>
<td>text: chef-server.example.com</td>
</tr>
<tr>
<td>CHEF_SERVER_VERSION</td>
<td>The version of chef server to install</td>
<td>text: 12.0.8</td>
</tr>
<tr>
<td>CHEF_NOTIFICATON_EMAIL</td>
<td>The email address the chef server will use for notifications and alerts.</td>
<td>text: name@example.com</td>
</tr>
<tr>
<td>LOG_LEVEL</td>
<td>The log level for the chef server install.</td>
<td>text: info</td>
</tr>
<tr>
<td>SMTP_RELAYHOST</td>
<td>The SMTP Relay host</td>
<td>text:email.relay.com</td>
</tr>
<tr>
<td>SMTP_SASL_USER_NAME</td>
<td>The username for the mail relay host</td>
<td>cred: SMTP_SASL_USER_NAME</td>
</tr>
<tr>
<td>SMTP_SASL_PASSWORD</td>
<td>The password for the mail relay host</td>
<td>cred: SMTP_SASL_PASSWORD</td>
</tr>
<tr>
<td>BACKUP_LINEAGE</td>
<td>The name of the backup</td>
<td>text: chef-server</td>
</tr>
<tr>
<td>STORAGE_ACCOUNT_ENDPOINT</td>
<td>The cloud storage endpoint</td>
<td>text: https://some.end.point.com/path/</td>
</tr>
<tr>
<td>STORAGE_ACCOUNT_ID</td>
<td>The Cloud provider Username or key</td>
<td>ccred:AWS_ACCESS_KEY_ID</td>
</tr>
<tr>
<td>STORAGE_ACCOUNT_PROVIDER</td>
<td>The cloud provider</td>
<td>text:aws</td>
</tr>
<tr>
<td>STORAGE_ACCOUNT_SECRET</td>
<td>The Cloud provider password or secret</td>
<td>cred:AWS_SECRET_ACCESS_KEY</td>
</tr>
<tr>
<td>SCHEDULE_ENABLE</td>
<td>Enable or disable the schedule backup</td>
<td>text: true</td>
</tr>
<tr>
<td>SCHEDULE_HOUR</td>
<td>The backup schedule hour based on the crontab hr</td>
<td>text: 6</td>
</tr>
<tr>
<td>SCHEDULE_MINUTE</td>
<td>The backup schedule minute base on the crontab min.</td>
<td>text: 30</td>
</tr>
</tbody></table>

<h3 id="steps-launch-the-server">Launch the Server</h3>

<ol>
<li>Go to the deployment&#39;s <strong>Servers</strong> tab and launch all of the load balancer servers. When you view the input confirmation page, there should not be any required inputs with missing values. If there are any required inputs that are missing values (highlighted in red) at the input confirmation page, cancel the launch and add values for those inputs at the deployment level before launching the server again. Refer to the instructions in <a href="/cm/dashboard/manage/deployments/deployments_actions.html#launch-a-server">Launch a Server</a> if you are not familiar with this process.<br></li>
</ol>

<h3 id="steps-configure-dns-records">Configure DNS Records</h3>

<p>If you are using Elastic IPs or already know the public IP addresses that will be used by the load balancer servers, you might have already set up the DNS records for the Chef Server. However, if you do not know the public IP addresses that will be assigned to the load balancer servers, you must manually set up the DNS records after the servers have been launched. Once the servers become operational (and have been assigned their respective public IP addresses), create or update the DNS records with your DNS provider. Each load balancer server should have its own DNS record with the same hostname (e.g. chef-server.example.com) that points to its public IP address.</p>

<p>The DNS records for the Chef sServer should direct traffic from the associated hostname (FQDN) (e.g. chef-server.example.com) to the application servers in its load balancing pool.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Once your server is operational you can configure your new Chef Server.  Review the documents below to guide you if you are not familiar with the Chef Server configuration.</p>

<ul>
<li>Setting up your client</li>
<li>Uploading cookbooks</li>
<li>Backup server and schedule backups</li>
</ul>

<h2 id="further-reading">Further Reading</h2>

<ul>
<li><a href="https://docs.chef.io/index.html">Chef Server Getting Started</a></li>
<li><a href="https://docs.chef.io/install_server.html#standalone">Chef Server Setup and Configure</a></li>
</ul>
</div></div></div><div class="col-sm-3 hidden-xs affix-parent"><div class="clearfix" data-clampedwidth=".affix-parent" data-offset-bottom="200" data-offset-top="4" data-spy="affix"><nav class="subnav-right" id="subnav-right" role="sub-nav"><script>createRightHandNav();</script></nav></div></div></div></div></div></div></div><footer class="main-footer" role="contentinfo"><div class="container-fluid max-width"><div class="row"><div class="col-sm-10"><ul class="list-inline"><li><small>&copy; 2024 Flexera</small></li><li><a href="http://www.flexera.com/" target="_blank"><small>Flexera Home</small></a></li><li><a href="https://www.flexera.com/about-us/careers.html" target="_blank"><small>We're Hiring</small></a></li></ul></div></div></div></footer><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-KB9SMN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-KB9SMN');</script><script type="text/javascript">
  // Add clipboard button trigger
  var snippets = document.querySelectorAll('.syntax-highlight');
  [].forEach.call(snippets, function(snippet) {
  snippet.firstChild.insertAdjacentHTML('beforebegin', '<button class="btn snippet-clipboard" data-clipboard-snippet><img src="/img/icon-clipboard.svg"></button>');
  });

  // clipboard trigger
  var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
  target: function(trigger) {
  return trigger.nextElementSibling;
  }
  });

  // Tooltip trigger
  clipboardSnippets.on('success', function(e) {
  e.clearSelection();
  showTooltip(e.trigger, 'Copied!');
  });

  // Error message
  clipboardSnippets.on('error', function(e) {
  showTooltip(e.trigger, fallbackMessage(e.action));
  });

  // Tooltip events
  var btns = document.querySelectorAll('.syntax-highlight .btn');
  for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener('mouseleave', clearTooltip);
  btns[i].addEventListener('blur', clearTooltip);
  }

  function clearTooltip(e) {
  e.currentTarget.setAttribute('class', 'btn');
  e.currentTarget.removeAttribute('aria-label');
  }

  function showTooltip(elem, msg) {
  elem.setAttribute('class', 'btn tooltipped tooltipped-s');
  elem.setAttribute('aria-label', msg);
  }
</script></body></html>